import{d as oe,g as v,s as me,u as de,v as Z,h as fe,P as Te,E as De,x as ve,r as b,i as ue,c as d,b as o,w as h,o as a,k as W,q as te,j as P,a as e,y as ye,F as R,m as j,t as S,l as L,n as G,z as g,A as E,B as ie,C as _e,p as he,e as ge,_ as be,Q as Ce,D as ce,M as le,I as Me,R as Ie,L as Se,S as Fe,T as Re,G as Ue,H as xe}from"./index-8a7c54d3.js";import{_ as Le}from"./BackButton.vue_vue_type_script_setup_true_lang-3994efeb.js";import{v as ne,i as $e}from"./validations-45222b88.js";import{u as ke}from"./customers-533e8710.js";import{c as re}from"./customers-69672a1b.js";import{r as se}from"./representatives-bf9aa398.js";import{_ as Pe}from"./DeleteButton.vue_vue_type_script_setup_true_lang-33d37ec2.js";import{_ as Be}from"./LockButton.vue_vue_type_style_index_0_lang-d0e7d944.js";const J=T=>(he("data-v-a6a5190d"),T=T(),ge(),T),ze={key:0},qe=J(()=>e("div",{class:"warning-message"},[e("div",{class:"warning-message-icon"}),e("div",{class:"warning-message-text"}," هاذا العميل في حالة قفل لا يمكن التعديل او اضافة مخوليين ")],-1)),Oe=[qe],Ye={key:1,style:{width:"30px",height:"30px","margin-right":"10px","margin-top":"0px"}},Ee={key:0},je={class:"grid p-fluid"},Ae={class:"field col-12 md:col-6 lg:col-4"},Ge={class:"p-float-label"},We={class:"field col-12 md:col-6 lg:col-4"},Ke={class:"p-float-label"},He={class:"field col-12 md:col-6 lg:col-4"},Qe={class:"p-float-label"},Je={class:"field col-12 md:col-6 lg:col-4"},Xe={class:"p-float-label"},Ze={class:"field col-12 md:col-6 lg:col-4"},et={class:"p-float-label"},tt={class:"field col-12 md:col-6 lg:col-4"},lt={key:1},ot=["onSubmit","disabled"],st={class:"grid p-fluid"},at={class:"field col-12 md:col-6 lg:col-4"},it={class:"p-float-label"},nt={style:{height:"10px"}},dt=J(()=>e("label",{for:"name"},"اسم ",-1)),rt={class:"field col-12 md:col-6 lg:col-4"},ut={class:"p-float-label"},ct=J(()=>e("label",{for:"email"},"البريد الإلكتروني",-1)),pt={style:{height:"10px"}},mt={class:"field col-12 md:col-6 lg:col-4"},ft={class:"p-float-label"},vt=J(()=>e("label",{for:"address"},"العنوان",-1)),yt={style:{height:"10px"}},_t={class:"field col-12 md:col-6 lg:col-4"},ht={class:"p-float-label"},gt=J(()=>e("label",{for:"address"},"المدينة",-1)),bt={style:{height:"10px"}},$t={class:"field col-12 md:col-6 lg:col-4"},wt={class:"p-float-label"},xt=J(()=>e("label",{for:"phoneNum1"},"رقم هاتف 1",-1)),kt={style:{height:"10px"}},Nt={class:"field col-12 md:col-6 lg:col-4"},Vt={class:"p-float-label"},Tt=J(()=>e("label",{for:"secondaryPhone"},"رقم هاتف 2",-1)),Dt=J(()=>e("div",{for:"files",style:{"margin-bottom":"2rem"}},"الملفات",-1)),Ct={class:"grid p-fluid"},Mt={class:"field col-4 md:col-4 lg:col-4"},It={class:"p-float-label"},St=J(()=>e("label",{for:"secondaryPhone"},"تعريف شخصي",-1)),Ft={key:0,class:"file-actions field col-4 md:col-4 lg:col-4"},Rt={key:1,class:"file-actions inline-block field col-4 md:col-4 lg:col-4"},Ut={class:"grid p-fluid"},Lt={class:"field col-4 md:col-4 lg:col-4"},Pt={class:"p-float-label"},Bt=J(()=>e("label",{for:"fileName"},"تخويل من الشركة",-1)),zt={key:0,class:"file-actions field col-4 md:col-4 lg:col-4"},qt={key:1,class:"file-actions inline-block field col-4 md:col-4 lg:col-4"},Ot={key:0},Yt=oe({__name:"CustomerDetails",props:{customer:{}},emits:["getCustomers"],setup(T,{emit:k}){var w,r,I,U,V,O,ee,u;const _=v(!0),C=v(!1);ke();const i=T,M=k,m=v(!1),p=v(!1),l=v(window.innerWidth);v("koko");const s=me({id:i.customer.id,name:i.customer.name,email:i.customer.email,primaryPhone:i.customer.primaryPhone,secondaryPhone:i.customer.secondaryPhone,address:i.customer.address,city:i.customer.address,status:i.customer.status,files:[{fileType:(w=i.customer.files[0])==null?void 0:w.fileType,file:((r=i.customer.files[0])==null?void 0:r.fileName)||((I=i.customer.files[0])==null?void 0:I.id),id:(U=i.customer.files[0])==null?void 0:U.id},{fileType:(V=i.customer.files[1])==null?void 0:V.fileType,file:((O=i.customer.files[1])==null?void 0:O.fileName)||((ee=i.customer.files[1])==null?void 0:ee.id),id:(u=i.customer.files[1])==null?void 0:u.id}],subsicrptions:[]}),$=de(),D=N=>{const t=document.createElement("input");t.type="file",t.accept=".pdf, .doc, .docx, .jpg, .jpeg, .png",t.addEventListener("change",x=>z(x,N)),t.click()},z=(N,t)=>{const x=N.target.files[0];x&&(s.files[t].file=x,s.files[t].fileType=Number(s.files[t].fileType),m.value=t===0,p.value=t===1,F(t))},F=async N=>{if(console.log(s.files[N].fileType),s.files[N].file){const t=new FormData;t.append("file",s.files[N].file,s.files[N].file.name);const x={};t.forEach((B,Y)=>{x[Y]=B.toString()}),console.log("formData:",x);const X=s.files[N].id;try{const B=await re.editDocument(s.id,X,t);console.log(B)}catch(B){console.log(B)}}},A=Z(()=>s.files.map(N=>N.file?N.file.name:"No file selected")),y=()=>{l.value=window.innerWidth};fe(()=>{window.addEventListener("resize",y)}),Te(()=>{window.removeEventListener("resize",y)}),De(()=>s.files,N=>{for(let t=0;t<N.length;t++)A.value[t]=N[t].file?N[t].file.name:"No file selected"});const q=async()=>{const N=new FormData;s.files[0].file instanceof File&&(N.append("File",s.files[0].file,s.files[0].file.name),N.append("DocType",s.files[0].fileType.toString()))},H=async()=>{const N=await n.value.$validate(),t=new FormData;t.append("name",s.name),t.append("email",s.email),t.append("primaryPhone",s.primaryPhone),t.append("secondaryPhone",s.secondaryPhone),t.append("address",s.address),t.append("city",s.city),t.append("status",s.status),q();const x={};t.forEach((X,B)=>{x[B]=X.toString()}),console.log("formData:",x),N?re.edit(i.customer.id,t).then(X=>{$.add({severity:"success",summary:"رسالة تأكيد",detail:X.data.msg,life:3e3}),_.value=!0,M("getCustomers")}).catch(()=>{$.add({severity:"error",summary:"خطأ",detail:"",life:3e3})}):$.add({severity:"error",summary:"رسالة خطأ",detail:"يرجى تعبئة الحقول",life:3e3})};v(!0);const Q=Z(()=>({name:{required:g.withMessage("الحقل مطلوب",E),validateText:g.withMessage(", حروف عربيه او انجليزيه فقط",ne),minLength:g.withMessage("يجب أن يحتوي على الأقل 3 أحرف",ie(3))},email:{required:g.withMessage("الحقل مطلوب",E),email:g.withMessage(" ليس عنوان بريد إلكتروني صالح",_e)},address:{required:g.withMessage("الحقل مطلوب",E)},city:{required:g.withMessage("الحقل مطلوب",E)},primaryPhone:{required:g.withMessage("الحقل مطلوب",E),isLibyanPhoneNumber:g.withMessage(" , ليس رقم ليبي صالح",$e)}})),n=ve(Q,s);v(null);const f=async(N,t)=>{try{const x=await re.getDocument(N,t);if(x){const X=new Blob([x.data],{type:"application/octet-stream"}),B=URL.createObjectURL(X),Y=document.createElement("a");Y.href=B,Y.download="downloaded_file.png",document.body.appendChild(Y),Y.click(),document.body.removeChild(Y),URL.revokeObjectURL(B)}else console.error("Invalid file response")}catch(x){console.error("Error downloading file:",x),$.add({severity:"error",summary:"خطأ",detail:"حدث خطأ أثناء تحميل الملف",life:3e3})}};return(N,t)=>{const x=b("Button"),X=b("Divider"),B=b("Skeleton"),Y=b("InputText"),we=b("InputMask"),Ne=b("Toast"),Ve=b("Card"),ae=ue("tooltip");return a(),d("div",null,[o(Ve,null,{title:h(()=>[W(" البيانات الشخصية "),o(Le,{style:{float:"left"}}),s.status==2?(a(),d("div",ze,Oe)):s.status!==2?(a(),d("span",Ye,[te(o(x,{onClick:t[0]||(t[0]=c=>_.value=!_.value),icon:" fa-solid fa-pen",text:"",rounded:"",class:"p-button-primary p-button-text"},null,512),[[ae,{value:"تعديل البيانات الشخصية",fitContent:!0},void 0,{top:!0}]])])):P("",!0),o(X)]),content:h(()=>[C.value?(a(),d("div",Ee,[e("div",je,[e("div",Ae,[e("span",Ge,[o(B,{loading:C.value,width:"100%",height:"2rem"},null,8,["loading"])])]),e("div",We,[e("span",Ke,[o(B,{loading:C.value,width:"100%",height:"2rem"},null,8,["loading"])])]),e("div",He,[e("span",Qe,[o(B,{loading:C.value,width:"100%",height:"2rem"},null,8,["loading"])])]),e("div",Je,[e("span",Xe,[o(B,{loading:C.value,width:"100%",height:"2rem"},null,8,["loading"])])]),e("div",Ze,[e("span",et,[o(B,{loading:C.value,width:"100%",height:"2rem"},null,8,["loading"])])]),e("div",tt,[o(B,{loading:C.value,width:"100%",height:"2rem"},null,8,["loading"])])])])):(a(),d("div",lt,[e("div",null,[e("form",{onSubmit:ye(H,["prevent"]),disabled:_.value},[e("div",st,[e("div",at,[e("span",it,[o(Y,{id:"name",type:"text",modelValue:s.name,"onUpdate:modelValue":t[1]||(t[1]=c=>s.name=c),disabled:_.value},null,8,["modelValue","disabled"]),e("div",nt,[(a(!0),d(R,null,j(L(n).name.$errors,c=>(a(),d("span",{key:c.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},S(c.$message),1))),128))]),dt])]),e("div",rt,[e("span",ut,[o(Y,{id:"email",type:"text",modelValue:s.email,"onUpdate:modelValue":t[2]||(t[2]=c=>s.email=c),disabled:_.value},null,8,["modelValue","disabled"]),ct,e("div",pt,[(a(!0),d(R,null,j(L(n).email.$errors,c=>(a(),d("span",{key:c.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},S(c.$message),1))),128))])])]),e("div",mt,[e("span",ft,[o(Y,{id:"address",type:"text",modelValue:s.address,"onUpdate:modelValue":t[3]||(t[3]=c=>s.address=c),disabled:_.value},null,8,["modelValue","disabled"]),vt,e("div",yt,[(a(!0),d(R,null,j(L(n).address.$errors,c=>(a(),d("span",{key:c.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},S(c.$message),1))),128))])])]),e("div",_t,[e("span",ht,[o(Y,{id:"address",type:"text",modelValue:s.city,"onUpdate:modelValue":t[4]||(t[4]=c=>s.city=c),disabled:_.value},null,8,["modelValue","disabled"]),gt,e("div",bt,[(a(!0),d(R,null,j(L(n).city.$errors,c=>(a(),d("span",{key:c.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},S(c.$message),1))),128))])])]),e("div",$t,[e("span",wt,[o(we,{id:"phoneNum1",modelValue:s.primaryPhone,"onUpdate:modelValue":t[5]||(t[5]=c=>s.primaryPhone=c),mask:"+218999999999",style:{direction:"ltr","text-align":"end"},disabled:_.value},null,8,["modelValue","disabled"]),xt,e("div",kt,[(a(!0),d(R,null,j(L(n).primaryPhone.$errors,c=>(a(),d("span",{key:c.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},S(c.$message),1))),128))])])]),e("div",Nt,[e("span",Vt,[o(we,{id:"secondaryPhone",modelValue:s.secondaryPhone,"onUpdate:modelValue":t[6]||(t[6]=c=>s.secondaryPhone=c),mask:"+218999999999",style:{direction:"ltr","text-align":"end"},disabled:_.value},null,8,["modelValue","disabled"]),Tt])])]),Dt,e("div",Ct,[e("div",Mt,[e("span",It,[m.value?(a(),G(Y,{key:1,class:"p-inputtext p-component",modelValue:s.files[0].file,"onUpdate:modelValue":t[8]||(t[8]=c=>s.files[0].file=c),value:A.value[0],disabled:!0},null,8,["modelValue","value"])):(a(),G(Y,{key:0,class:"p-inputtext p-component",modelValue:s.files[0].file,"onUpdate:modelValue":t[7]||(t[7]=c=>s.files[0].file=c),disabled:!0},null,8,["modelValue"])),St])]),l.value>=768?(a(),d("div",Ft,[o(x,{onClick:t[9]||(t[9]=c=>f(s.id,s.files[0].id)),icon:"fa-solid fa-download",class:"p-button-text p-button-info"},{default:h(()=>[W(" تحميل ")]),_:1}),_.value?P("",!0):(a(),G(x,{key:0,icon:"fa-solid fa-upload",class:"p-button-text p-button-info -2",onClick:t[10]||(t[10]=c=>D(0))},{default:h(()=>[W(" رفع ملف ")]),_:1}))])):(a(),d("div",Rt,[te(o(x,{onClick:t[11]||(t[11]=c=>f(s.id,s.files[0].id)),icon:"fa-solid fa-download",class:"p-button-icon-only p-button-info",text:""},null,512),[[ae,{value:"تحميل",fitContent:!0},void 0,{top:!0}]]),_.value?P("",!0):te((a(),G(x,{key:0,icon:"fa-solid fa-upload",class:"p-button-icon-only p-button-info",text:"",onClick:t[12]||(t[12]=c=>D(0))},null,512)),[[ae,{value:"رفع ملف",fitContent:!0},void 0,{top:!0}]])]))]),e("div",Ut,[e("div",Lt,[e("span",Pt,[p.value?(a(),G(Y,{key:1,class:"p-inputtext p-component",modelValue:s.files[1].file,"onUpdate:modelValue":t[14]||(t[14]=c=>s.files[1].file=c),value:A.value[1],disabled:!0},null,8,["modelValue","value"])):(a(),G(Y,{key:0,class:"p-inputtext p-component",modelValue:s.files[1].file,"onUpdate:modelValue":t[13]||(t[13]=c=>s.files[1].file=c),disabled:!0},null,8,["modelValue"])),Bt])]),l.value>=768?(a(),d("div",zt,[o(x,{onClick:t[15]||(t[15]=c=>f(s.id,s.files[1].id)),icon:"fa-solid fa-download",class:"p-button-text p-button-info"},{default:h(()=>[W(" تحميل ")]),_:1}),_.value?P("",!0):(a(),G(x,{key:0,icon:"fa-solid fa-upload",class:"p-button-text p-button-info -2",onClick:t[16]||(t[16]=c=>D(1))},{default:h(()=>[W(" رفع ملف ")]),_:1}))])):(a(),d("div",qt,[te(o(x,{onClick:t[17]||(t[17]=c=>f(s.id,s.files[1].id)),icon:"fa-solid fa-download",class:"p-button-icon-only p-button-info",text:""},null,512),[[ae,{value:"تحميل",fitContent:!0},void 0,{top:!0}]]),_.value?P("",!0):te((a(),G(x,{key:0,icon:"fa-solid fa-upload",class:"p-button-icon-only p-button-info",text:"",onClick:t[18]||(t[18]=c=>D(1))},null,512)),[[ae,{value:"رفع ملف",fitContent:!0},void 0,{top:!0}]])]))])],40,ot)]),_.value?P("",!0):(a(),d("div",Ot,[o(x,{onClick:H,icon:"fa-solid fa-check",label:"تعديل"}),o(x,{onClick:t[19]||(t[19]=c=>_.value=!_.value),icon:"fa-solid fa-ban",label:"إلغاء التعديل",class:"p-button-danger",style:{"margin-right":"0.5em"}})])),o(Ne,{position:"bottom-left"})]))]),_:1})])}}});const Et=be(Yt,[["__scopeId","data-v-a6a5190d"]]),K=T=>(he("data-v-5d6a98fe"),T=T(),ge(),T),jt=["onSubmit"],At={class:"grid p-fluid"},Gt={class:"field col-12 md:col-4 lg:col-4"},Wt={class:"p-float-label"},Kt=K(()=>e("label",{for:"firstName"},"الاسم ",-1)),Ht={style:{height:"2px","margin-bottom":"1rem"}},Qt={class:"field col-12 md:col-4 lg:col-4"},Jt={class:"p-float-label"},Xt=K(()=>e("label",{for:"lastName"},"اللقب ",-1)),Zt={style:{height:"2px","margin-bottom":"1rem"}},el={class:"field col-12 md:col-4 lg:col-4"},tl={class:"p-float-label"},ll=K(()=>e("label",{for:"email"},"البريد الإلكتروني",-1)),ol={style:{height:"2px"}},sl={class:"field col-12 md:col-4 lg:col-4"},al={class:"p-float-label"},il=K(()=>e("label",{for:"inputtext"},"رقم هاتف ",-1)),nl={style:{height:"2px","margin-bottom":"1rem"}},dl={class:"field col-12 md:col-4 lg:col-4"},rl={class:"p-float-label"},ul=K(()=>e("label",{for:"identityType"},"نوع الاثبات ",-1)),cl={style:{height:"2px","margin-bottom":"1rem"}},pl={class:"field col-12 md:col-4 lg:col-4"},ml={class:"p-float-label"},fl=K(()=>e("label",{for:"inputtext"},"رقم الاثبات ",-1)),vl={style:{height:"2px","margin-bottom":"1rem"}},yl={class:"field col-12 md:col-4 lg:col-4"},_l={class:"p-float-label"},hl=K(()=>e("label",{for:"periodOption"},"مدة الصلاحية",-1)),gl={key:0,class:"field col-12 md:col-4 lg:col-4"},bl={class:"p-float-label"},$l=K(()=>e("label",{for:"fromDate"},"من ",-1)),wl={key:1,class:"field col-12 md:col-4 lg:col-4"},xl={class:"p-float-label"},kl=K(()=>e("label",{for:"fromDate"}," الى",-1)),Nl={class:"field col-12 md:col-4 lg:col-4"},Vl={class:"file-input-label",for:"fileInput1"},Tl={class:"file-input-content"},Dl={key:0,class:"file-input-icon"},Cl={class:"file-input-text"},Ml=K(()=>e("i",{class:"pi pi-upload"},null,-1)),Il={key:0,style:{color:"red","font-weight":"bold","font-size":"small"}},Sl={class:"field col-12 md:col-4 lg:col-4"},Fl={class:"file-input-label",for:"fileInput2"},Rl={class:"file-input-content"},Ul={key:0,class:"file-input-icon"},Ll={class:"file-input-text"},Pl=K(()=>e("i",{class:"pi pi-upload"},null,-1)),Bl={key:0,style:{color:"red","font-weight":"bold","font-size":"small"}},zl=oe({__name:"RepresentativeForm",props:{representatives:{type:Object,required:!0},submitButtonText:{type:String,required:!0},value:String},setup(T){const k=T,_=de(),C=v(!1),i=v(null),M=v(null),m=v(k.representatives);async function p(A,y){const q=A.target.files[0];q&&(y===0?k.representatives.IdentityDocuments=q:k.representatives.RepresentationDocument=q)}const l=Ce(),s=async()=>{const A=await D.value.$validate();if(k.representatives.IdentityDocuments?i.value="":i.value="الحقل مطلوب",!k.representatives.RepresentationDocument)M.value="الحقل مطلوب";else{M.value="";try{A?(C.value=!0,l&&l.emit("form-submit",m.value)):_.add({severity:"error",summary:"رسالة خطأ",detail:"يرجى تعبئة الحقول",life:3e3})}catch(y){console.log(y)}}},$=Z(()=>({firstName:{required:g.withMessage("الحقل مطلوب",E),validateText:g.withMessage(", حروف عربيه او انجليزيه فقط",ne),minLength:g.withMessage("يجب أن يحتوي على الأقل 3 أحرف",ie(3))},lastName:{required:g.withMessage("الحقل مطلوب",E),validateText:g.withMessage(", حروف عربيه او انجليزيه فقط",ne),minLength:g.withMessage("يجب أن يحتوي على الأقل 3 أحرف",ie(3))},email:{required:g.withMessage("الحقل مطلوب",E),email:g.withMessage(" ليس عنوان بريد إلكتروني صالح",_e)},phoneNo:{required:g.withMessage("الحقل مطلوب",E),isLibyanPhoneNumber:g.withMessage(" , ليس رقم ليبي صالح",$e)},identityType:{required:g.withMessage("الحقل مطلوب",E)},identityNo:{required:g.withMessage("الحقل مطلوب",E)},type:{required:g.withMessage("الحقل مطلوب",E)}})),D=ve($,m),z=[{value:1,text:"اثبات هويه"},{value:2,text:"جواز سفر"}];v([{value:1,label:"ملف شخصي"},{value:2,label:"تخويل الشركة"}]),v(null),v(null);const F=v([{label:"مره",value:"0"},{label:"من-الى",value:"1"},{label:"طوال فترة العقد",value:"2"}]);return(A,y)=>{var r,I,U,V,O,ee;const q=b("InputText"),H=b("InputMask"),Q=b("Dropdown"),n=b("Calendar"),f=b("Button"),w=b("Toast");return a(),d("form",{onSubmit:ye(s,["prevent"])},[e("div",At,[e("div",Gt,[e("span",Wt,[o(q,{id:"firstName",type:"text",modelValue:m.value.firstName,"onUpdate:modelValue":y[0]||(y[0]=u=>m.value.firstName=u)},null,8,["modelValue"]),Kt,e("div",Ht,[(a(!0),d(R,null,j(L(D).firstName.$errors,u=>(a(),d("span",{key:u.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},S(u.$message),1))),128))])])]),e("div",Qt,[e("span",Jt,[o(q,{id:"lastName",type:"text",modelValue:m.value.lastName,"onUpdate:modelValue":y[1]||(y[1]=u=>m.value.lastName=u)},null,8,["modelValue"]),Xt,e("div",Zt,[(a(!0),d(R,null,j(L(D).lastName.$errors,u=>(a(),d("span",{key:u.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},S(u.$message),1))),128))])])]),e("div",el,[e("span",tl,[o(q,{id:"email",type:"text",modelValue:m.value.email,"onUpdate:modelValue":y[2]||(y[2]=u=>m.value.email=u)},null,8,["modelValue"]),ll,e("div",ol,[(a(!0),d(R,null,j(L(D).email.$errors,u=>(a(),d("span",{key:u.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},S(u.$message),1))),128))])])]),e("div",sl,[e("span",al,[o(H,{modelValue:m.value.phoneNo,"onUpdate:modelValue":y[3]||(y[3]=u=>m.value.phoneNo=u),mask:"+218999999999",style:{direction:"ltr"}},null,8,["modelValue"]),il,e("div",nl,[(a(!0),d(R,null,j(L(D).phoneNo.$errors,u=>(a(),d("span",{key:u.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},S(u.$message),1))),128))])])]),e("div",dl,[e("span",rl,[o(Q,{modelValue:m.value.identityType,"onUpdate:modelValue":y[4]||(y[4]=u=>m.value.identityType=u),options:z,optionValue:"value",optionLabel:"text",placeholder:" نوع الاثبات"},null,8,["modelValue"]),ul,e("div",cl,[(a(!0),d(R,null,j(L(D).identityType.$errors,u=>(a(),d("span",{key:u.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},S(u.$message),1))),128))])])]),e("div",pl,[e("span",ml,[o(q,{id:"inputtext",modelValue:m.value.identityNo,"onUpdate:modelValue":y[5]||(y[5]=u=>m.value.identityNo=u)},null,8,["modelValue"]),fl,e("div",vl,[(a(!0),d(R,null,j(L(D).identityNo.$errors,u=>(a(),d("span",{key:u.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},S(u.$message),1))),128))])])]),e("div",yl,[e("span",_l,[o(Q,{modelValue:m.value.type,"onUpdate:modelValue":y[6]||(y[6]=u=>m.value.type=u),options:F.value,optionLabel:"label",placeholder:"Select Period Option"},null,8,["modelValue","options"]),hl])]),((r=m.value.type)==null?void 0:r.value)=="1"?(a(),d("div",gl,[e("span",bl,[o(n,{id:"fromDate",type:"date",modelValue:m.value.from,"onUpdate:modelValue":y[7]||(y[7]=u=>m.value.from=u)},null,8,["modelValue"]),$l])])):P("",!0),((I=m.value.type)==null?void 0:I.value)=="1"?(a(),d("div",wl,[e("span",xl,[o(n,{id:"fromDate",type:"date",modelValue:m.value.to,"onUpdate:modelValue":y[8]||(y[8]=u=>m.value.to=u)},null,8,["modelValue"]),kl])])):P("",!0),e("div",Nl,[e("label",Vl,[e("div",Tl,[(U=m.value.IdentityDocuments)!=null&&U.name?P("",!0):(a(),d("div",Dl)),e("div",Cl,[Ml,W(" "+S(((V=m.value.IdentityDocuments)==null?void 0:V.name)||" تعريف شخصي"),1)])]),e("input",{id:"fileInput1",style:{display:"none"},type:"file",onChange:y[9]||(y[9]=u=>p(u,0)),accept:"*"},null,32)]),i.value?(a(),d("div",Il,S(i.value),1)):P("",!0)]),e("div",Sl,[e("label",Fl,[e("div",Rl,[(O=m.value.RepresentationDocument)!=null&&O.name?P("",!0):(a(),d("div",Ul)),e("div",Ll,[Pl,W(" "+S(((ee=m.value.RepresentationDocument)==null?void 0:ee.name)||"تخويل  "),1)])]),e("input",{id:"fileInput2",style:{display:"none"},type:"file",onChange:y[10]||(y[10]=u=>p(u,1)),accept:"*"},null,32)]),i.value?(a(),d("div",Bl,S(M.value),1)):P("",!0)])]),o(f,{style:{"margin-bottom":"50px"},onClick:s,icon:"pi pi-check",label:T.value,loading:C.value},null,8,["label","loading"]),o(w,{position:"bottom-left"})],40,jt)}}});const ql=be(zl,[["__scopeId","data-v-5d6a98fe"]]),Ol=["onSubmit"],Yl={class:"grid p-fluid"},El={class:"field col-12 md:col-6 lg:col-4"},jl={class:"p-float-label"},Al=e("label",{for:"name"},"الاسم ",-1),Gl={style:{height:"2px"}},Wl={class:"field col-12 md:col-6 lg:col-4"},Kl={class:"p-float-label"},Hl=e("label",{for:"name"},"اللقب ",-1),Ql={style:{height:"2px"}},Jl={class:"field col-12 md:col-6 lg:col-4"},Xl={class:"p-float-label"},Zl=e("label",{for:"email"},"البريد الإلكتروني",-1),eo={style:{height:"2px"}},to={class:"field col-12 md:col-6 lg:col-4"},lo={class:"p-float-label"},oo=e("label",{for:"inputtext"},"رقم هاتف ",-1),so={style:{height:"2px"}},ao={class:"field col-12 md:col-6 lg:col-4"},io={class:"p-float-label"},no=e("label",{for:"identityType"},"نوع الاثبات ",-1),ro={class:"field col-12 md:col-6 lg:col-4"},uo={class:"p-float-label"},co=e("label",{for:"inputtext"},"رقم الاثبات ",-1),po={class:"field col-12 md:col-6 lg:col-4"},mo={class:"p-float-label"},fo=e("label",{for:"periodOption"},"مدة الصلاحية",-1),vo={key:0,class:"field col-12 md:col-6 lg:col-4"},yo={class:"p-float-label"},_o=e("label",{for:"fromDate"},"من ",-1),ho={key:1,class:"field col-12 md:col-6 lg:col-4"},go={class:"p-float-label"},bo=e("label",{for:"fromDate"}," الى",-1),$o={class:"field col-4 md:col-4 lg:col-4"},wo={class:"p-float-label"},xo=e("label",{for:"secondaryPhone"},"تعريف شخصي",-1),ko={class:"field col-5 md:col-5 lg:col-5"},No={class:"grid p-fluid"},Vo={class:"field col-4 md:col-4 lg:col-4"},To={class:"p-float-label"},Do=e("label",{for:"secondaryPhone"},"تخويل من الشركة",-1),Co={class:"field col-4 md:col-3 lg:col-4"},Mo={class:"grid p-fluid"},Io=oe({__name:"EditRepresentatives",props:{id:{},representatives:{}},emits:["getRepresentatives"],setup(T,{emit:k}){const _=T,C=k,i=v(!1),M=ce(),m=v(!1);v(!1);const p=v();Z(()=>M&&M.params&&M.params.id?M.params.id:null),fe(()=>{s()});const l=me({id:"",firstName:"",lastName:"",identityNo:"",email:"",phoneNo:"",identityType:"",type:null,activeFrom:"",activeTo:"",files:[{fileType:0,id:""},{fileType:0,id:""}]});async function s(){se.getById(_.id).then(w=>{var r;p.value=w.data.content,l.id=p.value.id,l.firstName=(r=p.value)==null?void 0:r.firstName,l.lastName=p.value.lastName,l.email=p.value.email,l.identityNo=p.value.identityNo,l.identityType=p.value.identityType,l.phoneNo=p.value.phoneNo,l.type=p.value.type,l.activeFrom=le(p.value.activeFrom).format("YYYY-MM-DD"),l.activeTo=p.value.activeTo,l.files[0].fileType=p.value.files[0].fileType,l.files[0].id=p.value.files[0].id,l.files[1].id=p.value.files[1].id,l.files[1].fileType=p.value.files[1].fileType})}const $=async(w,r)=>{try{console.log(w,r);const I=await se.getFile(w,r);if(I){const U=new Blob([I.data],{type:"application/octet-stream"}),V=URL.createObjectURL(U),O=document.createElement("a");O.href=V,O.download="downloaded_file.png",document.body.appendChild(O),O.click(),document.body.removeChild(O),URL.revokeObjectURL(V)}else console.error("Invalid file response")}catch(I){console.error("Error downloading file:",I),D.add({severity:"error",summary:"خطأ",detail:"حدث خطأ أثناء تحميل الملف",life:3e3})}},D=de(),z=Z(()=>({firstName:{required:g.withMessage("الحقل مطلوب",E),validateText:g.withMessage(", حروف عربيه او انجليزيه فقط",ne),minLength:g.withMessage("يجب أن يحتوي على الأقل 3 أحرف",ie(3))},lastName:{required:g.withMessage("الحقل مطلوب",E),validateText:g.withMessage(", حروف عربيه او انجليزيه فقط",ne),minLength:g.withMessage("يجب أن يحتوي على الأقل 3 أحرف",ie(3))},email:{required:g.withMessage("الحقل مطلوب",E),email:g.withMessage(" ليس عنوان بريد إلكتروني صالح",_e)},phoneNo:{required:g.withMessage("الحقل مطلوب",E),isLibyanPhoneNumber:g.withMessage(" , ليس رقم ليبي صالح",$e)}})),F=ve(z,l),A=async()=>{await F.value.$validate(),new FormData;const w={email:l.email,phoneNo:l.phoneNo,identityNo:l.identityNo,identityType:l.identityType};se.edit(_.id,w).then(r=>{C("getRepresentatives"),D.add({severity:"success",summary:"Success Message",detail:r.data.msg,life:3e3}),y.value=!1}).catch(r=>{D.add({severity:"warn",summary:"خطا",detail:r,life:3e3})})},y=v(!1),q=()=>{var w;y.value=!0,l.firstName=(w=p.value)==null?void 0:w.firstName,l.lastName=p.value.lastName,l.email=p.value.email,l.identityNo=p.value.identityNo,l.identityType=p.value.identityType,l.phoneNo=p.value.phoneNo,l.type=p.value.type,l.activeFrom=le(p.value.activeFrom).format("YYYY-MM-DD"),l.activeTo=le(p.value.activeTo).format("YYYY-MM-DD"),l.files[0].fileType=p.value.files[0].fileType,l.files[1].fileType=p.value.files[1].fileType},H=[{value:1,text:"اثبات هويه"},{value:2,text:"جواز سفر"}],Q=v([{label:"مره",value:0},{label:"من-الى",value:1},{label:"طوال فترة العقد",value:2}]),n=Z(()=>l.files[0].fileType?l.files[0].id:"تعريف"),f=Z(()=>l.files[1].fileType?l.files[1].id:"تخويل");return(w,r)=>{const I=b("Button"),U=b("InputText"),V=b("InputMask"),O=b("Dropdown"),ee=b("Calendar"),u=b("Dialog"),N=ue("tooltip");return a(),d(R,null,[te(o(I,{onClick:q,icon:" fa-solid fa-pen",rounded:"",text:""},null,512),[[N,{value:"تعديل ",fitContent:!0}]]),o(u,{header:"تعديل المخول",contentStyle:"max-height: 73vh; max-width: 70vw; min-width:50vw; padding: 20px;",visible:y.value,"onUpdate:visible":r[13]||(r[13]=t=>y.value=t),modal:!0},{default:h(()=>[e("form",{onSubmit:ye(A,["prevent"])},[e("div",Yl,[e("div",El,[e("span",jl,[o(U,{id:"name",type:"text",modelValue:l.firstName,"onUpdate:modelValue":r[0]||(r[0]=t=>l.firstName=t),disabled:!0},null,8,["modelValue"]),Al,e("div",Gl,[(a(!0),d(R,null,j(L(F).firstName.$errors,t=>(a(),d("span",{key:t.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},S(t.$message),1))),128))])])]),e("div",Wl,[e("span",Kl,[o(U,{id:"name",type:"text",modelValue:l.lastName,"onUpdate:modelValue":r[1]||(r[1]=t=>l.lastName=t),disabled:!0},null,8,["modelValue"]),Hl,e("div",Ql,[(a(!0),d(R,null,j(L(F).lastName.$errors,t=>(a(),d("span",{key:t.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},S(t.$message),1))),128))])])]),e("div",Jl,[e("span",Xl,[o(U,{id:"email",type:"text",modelValue:l.email,"onUpdate:modelValue":r[2]||(r[2]=t=>l.email=t)},null,8,["modelValue"]),Zl,e("div",eo,[(a(!0),d(R,null,j(L(F).email.$errors,t=>(a(),d("span",{key:t.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},S(t.$message),1))),128))])])]),e("div",to,[e("span",lo,[o(V,{modelValue:l.phoneNo,"onUpdate:modelValue":r[3]||(r[3]=t=>l.phoneNo=t),mask:"+218999999999",style:{direction:"ltr"}},null,8,["modelValue"]),oo,e("div",so,[(a(!0),d(R,null,j(L(F).phoneNo.$errors,t=>(a(),d("span",{key:t.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},S(t.$message),1))),128))])])]),e("div",ao,[e("span",io,[o(O,{modelValue:l.identityType,"onUpdate:modelValue":r[4]||(r[4]=t=>l.identityType=t),options:H,optionValue:"value",optionLabel:"text",placeholder:" نوع الاثبات"},null,8,["modelValue"]),no])]),e("div",ro,[e("span",uo,[o(U,{id:"inputtext",modelValue:l.identityNo,"onUpdate:modelValue":r[5]||(r[5]=t=>l.identityNo=t)},null,8,["modelValue"]),co])]),e("div",po,[e("span",mo,[W(S()+" ",1),o(O,{modelValue:l.type,"onUpdate:modelValue":r[6]||(r[6]=t=>l.type=t),options:Q.value,optionValue:"value",optionLabel:"label",placeholder:"Select Period Option",disabled:!0},null,8,["modelValue","options"]),fo])]),l.type=="1"?(a(),d("div",vo,[e("span",yo,[o(ee,{id:"fromDate",type:"date",modelValue:l.activeFrom,"onUpdate:modelValue":r[7]||(r[7]=t=>l.activeFrom=t),disabled:!0},null,8,["modelValue"]),_o])])):P("",!0),l.type=="1"?(a(),d("div",ho,[e("span",go,[o(ee,{id:"fromDate",type:"date",modelValue:l.activeTo,"onUpdate:modelValue":r[8]||(r[8]=t=>l.activeTo=t),disabled:!0},null,8,["modelValue"]),bo])])):P("",!0),e("div",$o,[e("span",wo,[m.value?P("",!0):(a(),G(U,{key:0,class:"p-inputtext p-component",modelValue:l.files[0].fileType,"onUpdate:modelValue":r[9]||(r[9]=t=>l.files[0].fileType=t),value:n.value,disabled:!0},null,8,["modelValue","value"])),xo])]),e("div",ko,[e("div",No,[o(I,{onClick:r[10]||(r[10]=t=>$(l.id,l.files[0].id)),icon:"fa-solid fa-download",class:"p-button-text p-button-info"},{default:h(()=>[W(" تحميل ")]),_:1})])]),e("div",Vo,[e("span",To,[o(U,{class:"p-inputtext p-component",modelValue:l.files[1].fileType,"onUpdate:modelValue":r[11]||(r[11]=t=>l.files[1].fileType=t),value:f.value,disabled:!0},null,8,["modelValue","value"]),Do])]),e("div",Co,[e("div",Mo,[o(I,{onClick:r[12]||(r[12]=t=>$(l.id,l.files[1].id)),icon:"fa-solid fa-download",class:"p-button-text p-button-info"},{default:h(()=>[W(" تحميل ")]),_:1})])])]),o(I,{onClick:A,icon:"pi pi-check",loading:i.value,label:"تعديل"},null,8,["loading"])],40,Ol)]),_:1},8,["visible"])],64)}}}),So=e("div",{class:"confirmation-content"},[e("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"red"}}),e("span",null,"رفض او قبول ؟")],-1),Fo=oe({__name:"requestDialog",setup(T){const k=v(!1),_=v(!1);return(C,i)=>{const M=b("Button"),m=b("Dialog"),p=ue("tooltip");return a(),d(R,null,[te(o(M,{icon:"fa-solid fa-hand-point-up",severity:"info",text:"",rounded:"",onClick:i[0]||(i[0]=l=>k.value=!0)},null,512),[[p,{value:"طلب",fitContent:!0}]]),o(m,{visible:k.value,"onUpdate:visible":i[3]||(i[3]=l=>k.value=l),style:{width:"450px"},header:"تأكيد",modal:!0},{footer:h(()=>[o(M,{label:"نعم",icon:"pi pi-check",text:"",onClick:i[1]||(i[1]=l=>{C.$emit("submit"),k.value=!1}),loading:_.value},null,8,["loading"]),o(M,{label:"لا",icon:"pi pi-times",text:"",onClick:i[2]||(i[2]=l=>k.value=!1)})]),default:h(()=>[So]),_:1},8,["visible"])],64)}}}),Ro={style:{display:"flex","align-items":"center"}},Uo=e("div",{class:"no-data-message",style:{height:"100px",display:"flex","flex-direction":"column","align-items":"center","justify-content":"center",padding:"20px","background-color":"#f9f9f9","border-radius":"5px","box-shadow":"0 2px 4px rgba(0, 0, 0, 0.1)"}},[e("p",{style:{"font-size":"18px","font-weight":"bold",color:"#888"}}," لا يوجد بيانات ")],-1),Lo={key:0},Po=oe({__name:"Representatives",props:{customerStatus:{},CustomerId:{},representatives:{}},emits:["getRepresentatives"],setup(T,{emit:k}){const _=ce(),C=T,i=Z(()=>_&&_.params&&_.params.id?_.params.id:null),M=v();v(1),v(1),v(10),v(0);const m=v();v();const p=k,l=v({id:"",firstName:"",lastName:"",identityNo:"",email:"",phoneNo:"",identityType:null,customerId:Me(i.value),RepresentationDocument:null,IdentityDocuments:null,type:null,from:"",to:""}),s=de(),$=async n=>{var r;const f=new FormData;f.append("CustomerId",C.CustomerId),f.append("firstName",n.firstName),f.append("lastName",n.lastName),f.append("identityNo",n.identityNo),f.append("email",n.email),f.append("phoneNo",n.phoneNo);const w=parseInt(n.type.value,10);isNaN(w)||f.append("type",w.toString()),f.append("from",le(n.from).format("YYYY/MM/DD")),f.append("to",le(n.to).format("YYYY/MM/DD")),f.append("identityType",((r=n.identityType)==null?void 0:r.toString())||""),f.append("IdentityDocument",n.IdentityDocuments),f.append("RepresentationDocument",n.RepresentationDocument),se.create(f).then(I=>{console.log(I),p("getRepresentatives"),s.add({severity:"success",summary:"رسالة نجاح",detail:I.data.msg,life:3e3})}).catch(I=>{var U;s.add({severity:"warn",summary:"رسالة تحذير",detail:((U=I.response.data)==null?void 0:U.msg)||"حدث خطأ ما",life:3e3}),console.log(I)}).finally(()=>{F.value=!1,z()})},D=n=>{M.value=!0,se.remove(n).then(f=>{s.add({severity:"success",summary:"تم الحذف",detail:f.data.msg,life:3e3})}).catch(f=>{s.add({severity:"error",summary:"رسالة خطأ",detail:f.response.data.msg,life:3e3})}).finally(()=>{M.value=!1,p("getRepresentatives")})},z=()=>{l.value.firstName="",l.value.lastName="",l.value.email="",l.value.phoneNo="",l.value.identityNo="",l.value.identityType=null,l.value.RepresentationDocument=null,l.value.IdentityDocuments=null},F=v(!1),A=()=>{F.value=!0},y=v([{value:1,label:"نشط"},{value:2,label:"مقيد"}]),q=n=>{switch(H(n)){case"نشط":return"success";case"مقيد":return"danger"}},H=n=>{if(n=="1")return"نشط";if(n=="2")return"مقيد"},Q=n=>{const f=y.value.find(w=>w.value===n);return f?f.label:""};return(n,f)=>{const w=b("Button"),r=b("Column"),I=b("Tag"),U=b("DataTable");return a(),d(R,null,[e("div",Ro,[o(w,{onClick:A,class:"p-button-primary mb-4",style:{display:"flex"}},{default:h(()=>[W(" اضافة مُخول ")]),_:1}),o(L(Ie),{header:"اضافة مُخول",contentStyle:"max-height: 70vh; max-width: 40vw; min-width:50vw; padding: 10px;",visible:F.value,"onUpdate:visible":f[0]||(f[0]=V=>F.value=V),modal:!0},{default:h(()=>[o(ql,{onFormSubmit:$,representatives:l.value,submitButtonText:"add",value:"اضافه"},null,8,["representatives"])]),_:1},8,["visible"])]),o(U,{value:C.representatives,dataKey:"id",paginator:!0,rows:10,rowsPerPageOptions:[5,10,25],paginatorTemplate:"  "},{empty:h(()=>[Uo]),default:h(()=>[o(r,{field:"firstName",header:"اسم الاول",style:{"min-width":"6rem"},class:"font-bold"}),o(r,{field:"email",header:"البريد الالكتروني",style:{"min-width":"6rem"},class:"font-bold"}),o(r,{field:"phoneNo",header:"رقم الهاتف",style:{"min-width":"6rem"},class:"font-bold"}),o(r,{field:"status",header:"  الحاله ",filterField:"status",style:{width:"6rem"},showFilterMenu:!1,filterMenuStyle:{width:"12rem"}},{body:h(({data:V})=>[o(I,{value:Q(V.status),severity:q(V.status)},null,8,["value","severity"])]),_:1}),o(r,{style:{"min-width":"11rem"},header:"الاجراءات"},{body:h(V=>[V.data.status!==2?(a(),d("span",Lo,[o(Pe,{name:V.data.id,id:V.data.id,onSubmit:()=>D(V.data.id),type:"Representative"},null,8,["name","id","onSubmit"]),o(Io,{id:V.data.id,representatives:m.value,onGetRepresentatives:f[1]||(f[1]=O=>p("getRepresentatives"))},null,8,["id","representatives"])])):P("",!0),o(Be,{typeLock:"Representatives",id:V.data.id,name:V.data.id,status:V.data.status,onGetdata:f[2]||(f[2]=O=>p("getRepresentatives"))},null,8,["id","name","status"]),V.data.status==3?(a(),G(Fo,{key:1})):P("",!0)]),_:1})]),_:1},8,["value"])],64)}}});const Bo=e("div",{class:"no-data-message",style:{height:"100px",display:"flex","flex-direction":"column","align-items":"center","justify-content":"center",padding:"20px","background-color":"#f9f9f9","border-radius":"5px","box-shadow":"0 2px 4px rgba(0, 0, 0, 0.1)"}},[e("p",{style:{"font-size":"18px","font-weight":"bold",color:"#888"}}," لا يوجد بيانات ")],-1),zo=oe({__name:"SubscriptionByCustomerId",props:{subsId:{}},setup(T){v([]);const k=T;ce(),console.log(k.subsId);const _=v({global:{value:null,matchMode:Se.CONTAINS}}),C=v([{field:"serviceName",header:"الباقه"}]),i=v(C.value),M=$=>le($).format("yy/M/D  hh:mm a"),m=$=>{switch(l($)){case" مفعل":return"success";case" غير مفعل":return"danger";case" مقفل":return"danger"}},p=$=>{if($===1)return" مفعل";if($===2)return" غير مفعل";if($===5)return" مقفل"},l=$=>{if($=="1")return" مفعل";if($=="2")return" غير مفعل";if($=="5")return" مقفل"},s=$=>{const D=le(),F=le($).diff(D,"days");return F<=0?{label:"منتهي",color:"red"}:F<=30?{label:"قريباً من الانتهاء",color:"orange"}:{label:"صالح",color:"green"}};return($,D)=>{const z=b("Column"),F=b("Tag"),A=b("Dropdown"),y=b("Button"),q=b("RouterLink"),H=b("DataTable"),Q=ue("tooltip");return k.subsId?(a(),G(H,{key:0,ref:"dt",value:k.subsId,dataKey:"id",paginator:!0,rows:5,filters:_.value,"onUpdate:filters":D[0]||(D[0]=n=>_.value=n),globalFilterFields:["serviceName","customerName"],paginatorTemplate:"",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"عرض {first} الى {last} من {totalRecords} عميل",responsiveLayout:"scroll"},{empty:h(()=>[Bo]),default:h(()=>[o(z,{field:"customerName",header:"اسم العميل",style:{"min-width":"6rem"},class:"font-bold"}),o(z,{field:"daysRemaining",header:"الصلاحية",style:{"min-width":"4rem"}},{body:h(({data:n})=>[e("span",{style:Fe({color:s(n.endDate).color})},S(s(n.endDate).label),5)]),_:1}),o(z,{field:"status",header:"  الحاله ",filterField:"status",style:{width:"6rem"},showFilterMenu:!1,filterMenuStyle:{width:"12rem"}},{body:h(({data:n})=>[o(F,{value:p(n.status),severity:m(n.status)},null,8,["value","severity"])]),filter:h(({filterModel:n,filterCallback:f})=>[o(A,{modelValue:n.value,"onUpdate:modelValue":w=>n.value=w,onChange:w=>f(),options:["warning",""],placeholder:"Select One",class:"p-column-filter",style:{"min-width":"12rem"},showClear:!0},{option:h(w=>[o(F,{value:w.option,severity:w.option},null,8,["value","severity"])]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),(a(!0),d(R,null,j(i.value,(n,f)=>(a(),G(z,{field:n.field,header:n.header,key:n.field+"_"+f,style:{"min-width":"4rem"}},null,8,["field","header"]))),128)),o(z,{field:"startDate",header:"تاريخ البداية ",dataType:"date",style:{"min-width":"10rem"}},{body:h(({data:n})=>[W(S(M(n.startDate)),1)]),_:1}),o(z,{field:"endDate",header:"تاريخ النهاية ",dataType:"date",style:{"min-width":"10rem"}},{body:h(({data:n})=>[W(S(M(n.endDate)),1)]),_:1}),o(z,{style:{"min-width":"3rem"}},{body:h(n=>[(a(),G(q,{key:n.data.id,to:"/subscriptionsRecord/SubscriptionsDetaView/"+n.data.id,style:{"text-decoration":"none"}},{default:h(()=>[te(o(y,{icon:"fa-solid fa-circle-info",severity:"info",text:"",rounded:""},null,512),[[Q,{value:"التفاصيل",fitContent:!0}]])]),_:2},1032,["to"]))]),_:1})]),_:1},8,["value","filters"])):P("",!0)}}}),pe=T=>(he("data-v-072246eb"),T=T(),ge(),T),qo=pe(()=>e("i",{class:"ml-2 pi pi-user"},null,-1)),Oo=pe(()=>e("span",null,"المخولين",-1)),Yo=pe(()=>e("i",{class:"ml-2 pi pi-cog"},null,-1)),Eo=pe(()=>e("span",null,"جدول الاشتراكات",-1)),jo=oe({__name:"CustomerProfile",setup(T){const k=ce();ke();const _=v(!1);v(!1);const C=Z(()=>k&&k.params&&k.params.id?String(k.params.id):""),i=me({id:"",address:"",city:"",status:0,name:"",email:"",primaryPhone:"",secondaryPhone:"",files:[{file:null,docType:0},{file:null,docType:0}],subsicrptions:"",createdOn:"",representative:[],subscriptions:[]});fe(async()=>{await M()});function M(){_.value=!0,re.getById(C.value).then(l=>{const s=l.data.content;i.id=s.id,i.address=s.address,i.city=s.city,i.createdOn=s.createdOn,i.status=s.status,i.email=s.email,i.files=s.files,i.name=s.name,i.primaryPhone=s.primaryPhone,i.secondaryPhone=s.secondaryPhone,m(),p()}).catch(function(l){console.log(l)}).finally(()=>{_.value=!1})}function m(){se.get(C.value).then(l=>{i.representative=l.data.content})}function p(){Re.get(1,20,C.value).then(l=>{i.subsicrptions=l.data.content})}return de(),(l,s)=>{const $=b("card");return a(),d(R,null,[(a(),G(Et,{customer:i,key:i.id,onGetCustomers:M},null,8,["customer"])),o($,{class:"shadow-2 p-3 mt-3 border-round-2xl"},{content:h(()=>[o(L(Ue),{class:"tabview-custom",ref:"tabview4"},{default:h(()=>[o(L(xe),null,{header:h(()=>[qo,Oo]),default:h(()=>[o(Po,{onGetRepresentatives:s[0]||(s[0]=D=>m()),customerStatus:i.status,CustomerId:i.id,representatives:i.representative},null,8,["customerStatus","CustomerId","representatives"])]),_:1}),o(L(xe),null,{header:h(()=>[Yo,Eo]),default:h(()=>[(a(),G(zo,{key:i.subsicrptions,subsId:i.subsicrptions},null,8,["subsId"]))]),_:1})]),_:1},512)]),_:1})],64)}}});const Zo=be(jo,[["__scopeId","data-v-072246eb"]]);export{Zo as default};
