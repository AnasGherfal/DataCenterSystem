import{d as E,g as D,s as j,v as O,x as G,u as H,r as y,c as l,b as i,w as U,o as n,k as V,a as e,y as J,l as c,O as C,F as h,m as v,t as m,j as x,z as u,A as g,B as K,C as Q,f as R,p as W,e as X,_ as Y}from"./index-8a7c54d3.js";import{_ as Z}from"./BackButton.vue_vue_type_script_setup_true_lang-3994efeb.js";import{c as ee}from"./customers-69672a1b.js";import{v as te,i as se}from"./validations-45222b88.js";import{u as oe}from"./customers-533e8710.js";const d=b=>(W("data-v-fc1414e0"),b=b(),X(),b),le={class:"grid p-fluid"},ne={class:"field col-12 md:col-6 lg:col-4"},ae={class:"p-float-label"},ie={style:{height:"2px"}},de=d(()=>e("label",{for:"name"},"الاسم ",-1)),re={class:"field col-12 md:col-6 lg:col-4"},ce={class:"p-float-label"},me={style:{height:"2px"}},ue=d(()=>e("label",{for:"email"},"البريد الإلكتروني",-1)),pe={class:"field col-12 md:col-6 lg:col-4"},_e={class:"p-float-label"},fe={style:{height:"2px"}},ye=d(()=>e("label",{for:"city"},"المدينة",-1)),he={class:"field col-12 md:col-6 lg:col-4"},ve={class:"p-float-label"},ge={style:{height:"2px"}},be=d(()=>e("label",{for:"address"},"العنوان",-1)),Ce={class:"field col-12 md:col-6 lg:col-4"},xe={class:"p-float-label"},De={style:{height:"2px"}},Ve=d(()=>e("label",{for:"primaryPhone"},"رقم هاتف ",-1)),we={class:"field col-12 md:col-6 lg:col-4"},$e={class:"p-float-label"},Ie=d(()=>e("label",{for:"secondaryPhone"},"رقم هاتف 2",-1)),Pe=d(()=>e("div",{for:"files",style:{"margin-bottom":"0.5rem"}},"الملفات",-1)),ke={class:"grid p-fluid"},Me={class:"field col-12 md:col-6 lg:col-4"},Se=d(()=>e("div",{class:"file-input-label-text"},"تعريف شخصي",-1)),Ne={class:"file-input-label",for:"fileInput1"},Te={class:"file-input-content"},Ue={key:0,class:"file-input-icon"},qe={class:"file-input-text"},ze=d(()=>e("i",{class:"pi pi-upload"},null,-1)),Ae={key:0,class:"error-message"},Be={class:"field col-12 md:col-6 lg:col-4"},Fe=d(()=>e("div",{class:"file-input-label-text"},"تخويل من الشركة",-1)),Le={class:"file-input-label",for:"fileInput2"},Ee={class:"file-input-content"},je={key:0,class:"file-input-icon"},Oe={class:"file-input-text"},Ge=d(()=>e("i",{class:"pi pi-upload"},null,-1)),He={key:0,class:"error-message"},Je=E({__name:"AddCustomer",emits:["getCustomers"],setup(b,{emit:q}){oe();const z=D(!1),p=D(null),_=D(null),w=q,s=j({name:"",email:"",primaryPhone:"",secondaryPhone:"",city:"",address:"",CompanyDocuments:null,IdentityDocuments:null}),A=O(()=>({name:{required:u.withMessage("الحقل مطلوب",g),validateText:u.withMessage(", حروف فقط",te),minLength:u.withMessage("يجب أن يحتوي على الأقل 3 أحرف",K(3))},email:{required:u.withMessage("الحقل مطلوب",g),email:u.withMessage(" ليس عنوان بريد إلكتروني صالح",Q)},city:{required:u.withMessage("الحقل مطلوب",g)},address:{required:u.withMessage("الحقل مطلوب",g)},primaryPhone:{required:u.withMessage("الحقل مطلوب",g),isLibyanPhoneNumber:u.withMessage(" , ليس رقم ليبي صالح",se)}})),f=G(A,s),$=async()=>{const a=new FormData,o=await f.value.$validate();if(!s.IdentityDocuments||!s.CompanyDocuments)s.IdentityDocuments?p.value="":p.value="الحقل مطلوب",s.CompanyDocuments?_.value="":_.value="الحقل مطلوب";else{if(p.value="",_.value="",!o)return;a.append("Name",s.name),a.append("City",s.city),a.append("Address",s.address),a.append("Email",s.email),a.append("PrimaryPhone",s.primaryPhone),a.append("SecondaryPhone",s.secondaryPhone),a.append("IdentityDocument",s.IdentityDocuments),a.append("CompanyDocuments",s.CompanyDocuments),ee.create(a).then(r=>{w("getCustomers"),I.add({severity:"success",summary:"رسالة نجاح",detail:r.data.msg,life:2e3}),setTimeout(()=>{R.go(-1)},1)}).catch(r=>{I.add({severity:"error",summary:"خطأ",detail:r.response.data.msg,life:3e3})}).finally(()=>{z.value=!1,w("getCustomers")})}},I=H();async function P(a,o){const r=a.target.files[0];r&&(o===0?s.IdentityDocuments=r:s.CompanyDocuments=r,o===0?p.value="":_.value="")}return(a,o)=>{const r=y("Divider"),k=y("InputMask"),B=y("Button"),F=y("Toast"),L=y("Card");return n(),l("div",null,[i(L,null,{title:U(()=>[V(" إضافة عميل "),i(Z,{style:{float:"left"}}),i(r)]),content:U(()=>{var M,S,N,T;return[e("div",null,[e("form",{onSubmit:o[9]||(o[9]=J(t=>$(),["prevent"]))},[e("div",le,[e("div",ne,[e("span",ae,[i(c(C),{id:"name",type:"text",modelValue:s.name,"onUpdate:modelValue":o[0]||(o[0]=t=>s.name=t)},null,8,["modelValue"]),e("div",ie,[(n(!0),l(h,null,v(c(f).name.$errors,t=>(n(),l("span",{key:t.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},m(t.$message),1))),128))]),de])]),e("div",re,[e("span",ce,[i(c(C),{id:"email",type:"text",modelValue:s.email,"onUpdate:modelValue":o[1]||(o[1]=t=>s.email=t)},null,8,["modelValue"]),e("div",me,[(n(!0),l(h,null,v(c(f).email.$errors,t=>(n(),l("span",{key:t.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},m(t.$message),1))),128))]),ue])]),e("div",pe,[e("span",_e,[i(c(C),{id:"city",name:"city",type:"text",modelValue:s.city,"onUpdate:modelValue":o[2]||(o[2]=t=>s.city=t)},null,8,["modelValue"]),e("div",fe,[(n(!0),l(h,null,v(c(f).city.$errors,t=>(n(),l("span",{key:t.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},m(t.$message),1))),128))]),ye])]),e("div",he,[e("span",ve,[i(c(C),{id:"address",name:"address",type:"text",modelValue:s.address,"onUpdate:modelValue":o[3]||(o[3]=t=>s.address=t)},null,8,["modelValue"]),e("div",ge,[(n(!0),l(h,null,v(c(f).address.$errors,t=>(n(),l("span",{key:t.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},m(t.$message),1))),128))]),be])]),e("div",Ce,[e("span",xe,[i(k,{id:"primaryPhone",modelValue:s.primaryPhone,"onUpdate:modelValue":o[4]||(o[4]=t=>s.primaryPhone=t),mask:"+218999999999",style:{direction:"ltr","text-align":"end"}},null,8,["modelValue"]),e("div",De,[(n(!0),l(h,null,v(c(f).primaryPhone.$errors,t=>(n(),l("span",{key:t.$uid,style:{color:"red",direction:"ltr","font-weight":"bold","font-size":"small"}},m(t.$message),1))),128))]),Ve])]),e("div",we,[e("span",$e,[i(k,{id:"secondaryPhone",modelValue:s.secondaryPhone,"onUpdate:modelValue":o[5]||(o[5]=t=>s.secondaryPhone=t),mask:"+218999999999",style:{direction:"ltr","text-align":"end"}},null,8,["modelValue"]),Ie])])]),Pe,e("div",ke,[e("div",Me,[Se,e("label",Ne,[e("div",Te,[(M=s.IdentityDocuments)!=null&&M.name?x("",!0):(n(),l("div",Ue)),e("div",qe,[ze,V(" "+m(((S=s.IdentityDocuments)==null?void 0:S.name)||"ارفق ملف"),1)])]),e("input",{id:"fileInput1",style:{display:"none"},type:"file",onChange:o[6]||(o[6]=t=>P(t,0)),accept:"*"},null,32)]),p.value?(n(),l("div",Ae,m(p.value),1)):x("",!0)]),e("div",Be,[Fe,e("label",Le,[e("div",Ee,[(N=s.CompanyDocuments)!=null&&N.name?x("",!0):(n(),l("div",je)),e("div",Oe,[Ge,V(" "+m(((T=s.CompanyDocuments)==null?void 0:T.name)||"ارفق ملف"),1)])]),e("input",{id:"fileInput2",style:{display:"none"},type:"file",onChange:o[7]||(o[7]=t=>P(t,1)),accept:"*"},null,32)]),_.value?(n(),l("div",He,m(_.value),1)):x("",!0)])]),i(B,{onClick:o[8]||(o[8]=t=>$()),icon:"fa-solid fa-plus",label:"إضافة"}),i(F,{position:"bottom-left"})],32)])]}),_:1})])}}});const Ye=Y(Je,[["__scopeId","data-v-fc1414e0"]]);export{Ye as default};
