import{d as D,g as f,s as E,v as z,u as P,x as j,r as o,c as m,b as a,w as u,o as n,k as v,a as e,F as V,m as x,n as I,t as g,l as N,j as G,y as H,z as c,A as $,B as J,C as K,f as O}from"./index-8a7c54d3.js";import{_ as Q}from"./BackButton.vue_vue_type_script_setup_true_lang-3994efeb.js";import{u as R,a as W}from"./admin-84180614.js";const X=["onSubmit"],Y={class:"grid p-fluid"},Z={class:"field col-12 md:col-6 lg:col-4"},ee={class:"p-float-label"},se={style:{height:"2px"}},le=e("label",{for:"emil"}," اسم الموظف",-1),te={class:"field col-12 md:col-6 lg:col-4"},ae={class:"p-float-label"},oe={style:{height:"2px"}},ne=e("label",{for:"emil"}," البريد الالكتروني",-1),ie={class:"field col-12 md:col-6 lg:col-4"},de={class:"p-float-label"},re={style:{height:"2px"}},me=e("label",{for:"empId"},"الرقم الوظيفي",-1),ue={class:"field col-12 md:col-6 lg:col-4"},ce={class:"p-float-label"},pe=e("label",{for:"empId"},"الصلاحيات",-1),_e={key:0,class:"error-message"},ye=D({__name:"AddAdmin",setup(fe){const h=f(!1),M=R(),l=E({fullName:"",email:"",empId:null,permissions:0}),p=f(),d=f([]),C=f([{name:"جميع الصلاحيات",value:1},{name:"ادارة العملاء",value:2},{name:"مسح عميل",value:4},{name:"ادارة الخدمات",value:8},{name:"مسح خدمه",value:16},{name:"ادارة الاشتركات",value:32},{name:"مسخ اشتراك",value:64},{name:"ادارة المرافقين",value:128},{name:"مسح مرافق",value:256}]),A=z(()=>({fullName:{required:c.withMessage("الحقل مطلوب",$)},empId:{required:c.withMessage("الحقل مطلوب",$),minLength:c.withMessage("يجب أن يحتوي 4 ارقام",J(4))},email:{required:c.withMessage("الحقل مطلوب",$),email:c.withMessage(" ليس عنوان بريد إلكتروني صالح",K)}})),y=P(),_=j(A,l),B=()=>{let r=0;return d.value&&d.value.length>0&&(r=d.value.reduce((t,i)=>t+parseInt(i),0)),r},S=async()=>{const r=await _.value.$validate();if(d?p.value="":p.value="الحقل مطلوب",r){const t=B();l.permissions=t,W.create(l).then(function(i){M.getAdmins(),y.add({severity:"success",summary:"رسالة نجاح",detail:i.data.msg,life:3e3}),h.value=!1,O.go(-1)}).catch(function(i){y.add({severity:"error",summary:"رسالة فشل",detail:i.response.data.msg||"هنالك مشكلة في الوصول",life:3e3})})}else y.add({severity:"error",summary:"رسالة فشل",detail:"قم بتعبئة الحقول",life:3e3});h.value=!1},T=()=>{l.empId=null,l.fullName="",l.email="",l.permissions=0};return(r,t)=>{const i=o("Divider"),k=o("InputText"),b=o("error"),F=o("InputNumber"),L=o("MultiSelect"),w=o("Button"),q=o("Toast"),U=o("Card");return n(),m("div",null,[a(U,null,{title:u(()=>[v(" إضافة مستخدم "),a(Q,{style:{float:"left"}}),a(i,{layout:"horizontal"})]),content:u(()=>[e("form",{onSubmit:H(S,["prevent"])},[e("div",Y,[e("div",Z,[e("span",ee,[a(k,{id:"FullName",modelValue:l.fullName,"onUpdate:modelValue":t[0]||(t[0]=s=>l.fullName=s),type:"text",placeholder:"أدخل اسم الموظف"},null,8,["modelValue"]),e("div",se,[(n(!0),m(V,null,x(N(_).fullName.$errors,s=>(n(),I(b,{key:s.$uid,class:"p-error"},{default:u(()=>[v(g(s.$message),1)]),_:2},1024))),128))]),le])]),e("div",te,[e("span",ae,[a(k,{id:"Email",type:"text",modelValue:l.email,"onUpdate:modelValue":t[1]||(t[1]=s=>l.email=s)},null,8,["modelValue"]),e("div",oe,[(n(!0),m(V,null,x(N(_).email.$errors,s=>(n(),I(b,{key:s.$uid,class:"p-error"},{default:u(()=>[v(g(s.$message),1)]),_:2},1024))),128))]),ne])]),e("div",ie,[e("span",de,[a(F,{id:"EmpId",mask:"99999",modelValue:l.empId,"onUpdate:modelValue":t[2]||(t[2]=s=>l.empId=s)},null,8,["modelValue"]),e("div",re,[(n(!0),m(V,null,x(N(_).empId.$errors,s=>(n(),I(b,{key:s.$uid,class:"p-error"},{default:u(()=>[v(g(s.$message),1)]),_:2},1024))),128))]),me])]),e("div",ue,[e("span",ce,[a(L,{modelValue:d.value,"onUpdate:modelValue":t[3]||(t[3]=s=>d.value=s),display:"chip",optionValue:"value",options:C.value,optionLabel:"name",maxSelectedLabels:3,placeholder:"اختر الصلاحيات"},null,8,["modelValue","options"]),pe,p.value?(n(),m("div",_e,g(p.value),1)):G("",!0)])])]),a(w,{class:"p-button-primry",icon:"fa-solid fa-plus",label:"إضافة",type:"submit",loading:h.value},null,8,["loading"]),a(w,{onClick:T,icon:"fa-solid fa-delete-left",label:"مسح",class:"p-button-danger",style:{"margin-right":"0.5em"}}),a(q,{position:"bottom-left"})],40,X)]),_:1})])}}});export{ye as default};
