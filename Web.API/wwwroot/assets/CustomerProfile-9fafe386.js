import{d as se,g as f,v as ue,u as ae,x as Z,h as fe,S as Te,G as De,y as ve,r as w,i as ce,c as n,b as s,w as b,o as a,k as W,q as ee,j as z,a as e,z as ye,F as U,m as O,t as M,l as P,n as A,A as $,B as E,C as ne,D as _e,p as he,e as ge,_ as be,T as Ce,E as pe,N as te,J as Me,U as Ie,M as Se,V as Re,W as Fe,H as Ue,I as xe}from"./index-a77bd56c.js";import{_ as Pe}from"./BackButton.vue_vue_type_script_setup_true_lang-4ecc4c64.js";import{v as de,i as $e}from"./validations-45222b88.js";import{u as Ne}from"./customers-7589c288.js";import{c as re}from"./customers-174bfc0d.js";import{r as le}from"./representatives-10b2d14c.js";import{_ as Le}from"./DeleteButton.vue_vue_type_script_setup_true_lang-792297cb.js";import{_ as Be}from"./LockButton.vue_vue_type_style_index_0_lang-4d8b9a35.js";import{u as ze}from"./shared-5d9da838.js";const Q=T=>(he("data-v-a6a5190d"),T=T(),ge(),T),qe={key:0},Oe=Q(()=>e("div",{class:"warning-message"},[e("div",{class:"warning-message-icon"}),e("div",{class:"warning-message-text"}," هاذا العميل في حالة قفل لا يمكن التعديل او اضافة مخوليين ")],-1)),Ye=[Oe],je={key:1,style:{width:"30px",height:"30px","margin-right":"10px","margin-top":"0px"}},Ee={key:0},Ae={class:"grid p-fluid"},Ge={class:"field col-12 md:col-6 lg:col-4"},We={class:"p-float-label"},Ke={class:"field col-12 md:col-6 lg:col-4"},He={class:"p-float-label"},Je={class:"field col-12 md:col-6 lg:col-4"},Qe={class:"p-float-label"},Xe={class:"field col-12 md:col-6 lg:col-4"},Ze={class:"p-float-label"},et={class:"field col-12 md:col-6 lg:col-4"},tt={class:"p-float-label"},lt={class:"field col-12 md:col-6 lg:col-4"},ot={key:1},st=["onSubmit","disabled"],at={class:"grid p-fluid"},it={class:"field col-12 md:col-6 lg:col-4"},nt={class:"p-float-label"},dt={style:{height:"10px"}},rt=Q(()=>e("label",{for:"name"},"اسم ",-1)),ut={class:"field col-12 md:col-6 lg:col-4"},ct={class:"p-float-label"},pt=Q(()=>e("label",{for:"email"},"البريد الإلكتروني",-1)),mt={style:{height:"10px"}},ft={class:"field col-12 md:col-6 lg:col-4"},vt={class:"p-float-label"},yt=Q(()=>e("label",{for:"address"},"العنوان",-1)),_t={style:{height:"10px"}},ht={class:"field col-12 md:col-6 lg:col-4"},gt={class:"p-float-label"},bt=Q(()=>e("label",{for:"address"},"المدينة",-1)),$t={style:{height:"10px"}},wt={class:"field col-12 md:col-6 lg:col-4"},xt={class:"p-float-label"},Nt=Q(()=>e("label",{for:"phoneNum1"},"رقم هاتف 1",-1)),kt={style:{height:"10px"}},Vt={class:"field col-12 md:col-6 lg:col-4"},Tt={class:"p-float-label"},Dt=Q(()=>e("label",{for:"secondaryPhone"},"رقم هاتف 2",-1)),Ct=Q(()=>e("div",{for:"files",style:{"margin-bottom":"2rem"}},"الملفات",-1)),Mt={class:"grid p-fluid"},It={class:"field col-4 md:col-4 lg:col-4"},St={class:"p-float-label"},Rt=Q(()=>e("label",{for:"secondaryPhone"},"تعريف شخصي",-1)),Ft={key:0,class:"file-actions field col-4 md:col-4 lg:col-4"},Ut={key:1,class:"file-actions inline-block field col-4 md:col-4 lg:col-4"},Pt={class:"grid p-fluid"},Lt={class:"field col-4 md:col-4 lg:col-4"},Bt={class:"p-float-label"},zt=Q(()=>e("label",{for:"fileName"},"تخويل من الشركة",-1)),qt={key:0,class:"file-actions field col-4 md:col-4 lg:col-4"},Ot={key:1,class:"file-actions inline-block field col-4 md:col-4 lg:col-4"},Yt={key:0},jt=se({__name:"CustomerDetails",props:{customer:{}},emits:["getCustomers"],setup(T,{emit:S}){var m,i,F,I,B,d,k,oe;const y=f(!0),D=f(!1);Ne();const r=T,C=S,u=f(!1),p=f(!1),l=f(window.innerWidth);f("koko");const o=ue({id:r.customer.id,name:r.customer.name,email:r.customer.email,primaryPhone:r.customer.primaryPhone,secondaryPhone:r.customer.secondaryPhone,address:r.customer.address,city:r.customer.address,status:r.customer.status,files:[{fileType:(m=r.customer.files[0])==null?void 0:m.fileType,file:((i=r.customer.files[0])==null?void 0:i.fileName)||((F=r.customer.files[0])==null?void 0:F.id),id:(I=r.customer.files[0])==null?void 0:I.id},{fileType:(B=r.customer.files[1])==null?void 0:B.fileType,file:((d=r.customer.files[1])==null?void 0:d.fileName)||((k=r.customer.files[1])==null?void 0:k.id),id:(oe=r.customer.files[1])==null?void 0:oe.id}],subsicrptions:[]}),h=ae(),g=V=>{const t=document.createElement("input");t.type="file",t.accept=".pdf, .doc, .docx, .jpg, .jpeg, .png",t.addEventListener("change",x=>N(x,V)),t.click()},N=(V,t)=>{const x=V.target.files[0];x&&(o.files[t].file=x,o.files[t].fileType=Number(o.files[t].fileType),u.value=t===0,p.value=t===1,R(t))},R=async V=>{if(console.log(o.files[V].fileType),o.files[V].file){const t=new FormData;t.append("file",o.files[V].file,o.files[V].file.name);const x={};t.forEach((q,j)=>{x[j]=q.toString()}),console.log("formData:",x);const X=o.files[V].id;try{const q=await re.editDocument(o.id,X,t);console.log(q)}catch(q){console.log(q)}}},L=Z(()=>o.files.map(V=>V.file?V.file.name:"No file selected")),v=()=>{l.value=window.innerWidth};fe(()=>{window.addEventListener("resize",v)}),Te(()=>{window.removeEventListener("resize",v)}),De(()=>o.files,V=>{for(let t=0;t<V.length;t++)L.value[t]=V[t].file?V[t].file.name:"No file selected"});const Y=async()=>{const V=new FormData;o.files[0].file instanceof File&&(V.append("File",o.files[0].file,o.files[0].file.name),V.append("DocType",o.files[0].fileType.toString()))},K=async()=>{const V=await _.value.$validate(),t=new FormData;t.append("name",o.name),t.append("email",o.email),t.append("primaryPhone",o.primaryPhone),t.append("secondaryPhone",o.secondaryPhone),t.append("address",o.address),t.append("city",o.city),t.append("status",o.status),Y();const x={};t.forEach((X,q)=>{x[q]=X.toString()}),console.log("formData:",x),V?re.edit(r.customer.id,t).then(X=>{h.add({severity:"success",summary:"رسالة تأكيد",detail:X.data.msg,life:3e3}),y.value=!0,C("getCustomers")}).catch(()=>{h.add({severity:"error",summary:"خطأ",detail:"",life:3e3})}):h.add({severity:"error",summary:"رسالة خطأ",detail:"يرجى تعبئة الحقول",life:3e3})};f(!0);const J=Z(()=>({name:{required:$.withMessage("الحقل مطلوب",E),validateText:$.withMessage(", حروف عربيه او انجليزيه فقط",de),minLength:$.withMessage("يجب أن يحتوي على الأقل 3 أحرف",ne(3))},email:{required:$.withMessage("الحقل مطلوب",E),email:$.withMessage(" ليس عنوان بريد إلكتروني صالح",_e)},address:{required:$.withMessage("الحقل مطلوب",E)},city:{required:$.withMessage("الحقل مطلوب",E)},primaryPhone:{required:$.withMessage("الحقل مطلوب",E),isLibyanPhoneNumber:$.withMessage(" , ليس رقم ليبي صالح",$e)}})),_=ve(J,o);f(null);const G=async(V,t)=>{try{const x=await re.getDocument(V,t);if(x){const X=new Blob([x.data],{type:"application/octet-stream"}),q=URL.createObjectURL(X),j=document.createElement("a");j.href=q,j.download="downloaded_file.png",document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(q)}else console.error("Invalid file response")}catch(x){console.error("Error downloading file:",x),h.add({severity:"error",summary:"خطأ",detail:"حدث خطأ أثناء تحميل الملف",life:3e3})}};return(V,t)=>{const x=w("Button"),X=w("Divider"),q=w("Skeleton"),j=w("InputText"),we=w("InputMask"),ke=w("Toast"),Ve=w("Card"),ie=ce("tooltip");return a(),n("div",null,[s(Ve,null,{title:b(()=>[W(" البيانات الشخصية "),s(Pe,{style:{float:"left"}}),o.status==2?(a(),n("div",qe,Ye)):o.status!==2?(a(),n("span",je,[ee(s(x,{onClick:t[0]||(t[0]=c=>y.value=!y.value),icon:" fa-solid fa-pen",text:"",rounded:"",class:"p-button-primary p-button-text"},null,512),[[ie,{value:"تعديل البيانات الشخصية",fitContent:!0},void 0,{top:!0}]])])):z("",!0),s(X)]),content:b(()=>[D.value?(a(),n("div",Ee,[e("div",Ae,[e("div",Ge,[e("span",We,[s(q,{loading:D.value,width:"100%",height:"2rem"},null,8,["loading"])])]),e("div",Ke,[e("span",He,[s(q,{loading:D.value,width:"100%",height:"2rem"},null,8,["loading"])])]),e("div",Je,[e("span",Qe,[s(q,{loading:D.value,width:"100%",height:"2rem"},null,8,["loading"])])]),e("div",Xe,[e("span",Ze,[s(q,{loading:D.value,width:"100%",height:"2rem"},null,8,["loading"])])]),e("div",et,[e("span",tt,[s(q,{loading:D.value,width:"100%",height:"2rem"},null,8,["loading"])])]),e("div",lt,[s(q,{loading:D.value,width:"100%",height:"2rem"},null,8,["loading"])])])])):(a(),n("div",ot,[e("div",null,[e("form",{onSubmit:ye(K,["prevent"]),disabled:y.value},[e("div",at,[e("div",it,[e("span",nt,[s(j,{id:"name",type:"text",modelValue:o.name,"onUpdate:modelValue":t[1]||(t[1]=c=>o.name=c),disabled:y.value},null,8,["modelValue","disabled"]),e("div",dt,[(a(!0),n(U,null,O(P(_).name.$errors,c=>(a(),n("span",{key:c.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},M(c.$message),1))),128))]),rt])]),e("div",ut,[e("span",ct,[s(j,{id:"email",type:"text",modelValue:o.email,"onUpdate:modelValue":t[2]||(t[2]=c=>o.email=c),disabled:y.value},null,8,["modelValue","disabled"]),pt,e("div",mt,[(a(!0),n(U,null,O(P(_).email.$errors,c=>(a(),n("span",{key:c.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},M(c.$message),1))),128))])])]),e("div",ft,[e("span",vt,[s(j,{id:"address",type:"text",modelValue:o.address,"onUpdate:modelValue":t[3]||(t[3]=c=>o.address=c),disabled:y.value},null,8,["modelValue","disabled"]),yt,e("div",_t,[(a(!0),n(U,null,O(P(_).address.$errors,c=>(a(),n("span",{key:c.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},M(c.$message),1))),128))])])]),e("div",ht,[e("span",gt,[s(j,{id:"address",type:"text",modelValue:o.city,"onUpdate:modelValue":t[4]||(t[4]=c=>o.city=c),disabled:y.value},null,8,["modelValue","disabled"]),bt,e("div",$t,[(a(!0),n(U,null,O(P(_).city.$errors,c=>(a(),n("span",{key:c.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},M(c.$message),1))),128))])])]),e("div",wt,[e("span",xt,[s(we,{id:"phoneNum1",modelValue:o.primaryPhone,"onUpdate:modelValue":t[5]||(t[5]=c=>o.primaryPhone=c),mask:"+218999999999",style:{direction:"ltr","text-align":"end"},disabled:y.value},null,8,["modelValue","disabled"]),Nt,e("div",kt,[(a(!0),n(U,null,O(P(_).primaryPhone.$errors,c=>(a(),n("span",{key:c.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},M(c.$message),1))),128))])])]),e("div",Vt,[e("span",Tt,[s(we,{id:"secondaryPhone",modelValue:o.secondaryPhone,"onUpdate:modelValue":t[6]||(t[6]=c=>o.secondaryPhone=c),mask:"+218999999999",style:{direction:"ltr","text-align":"end"},disabled:y.value},null,8,["modelValue","disabled"]),Dt])])]),Ct,e("div",Mt,[e("div",It,[e("span",St,[u.value?(a(),A(j,{key:1,class:"p-inputtext p-component",modelValue:o.files[0].file,"onUpdate:modelValue":t[8]||(t[8]=c=>o.files[0].file=c),value:L.value[0],disabled:!0},null,8,["modelValue","value"])):(a(),A(j,{key:0,class:"p-inputtext p-component",modelValue:o.files[0].file,"onUpdate:modelValue":t[7]||(t[7]=c=>o.files[0].file=c),disabled:!0},null,8,["modelValue"])),Rt])]),l.value>=768?(a(),n("div",Ft,[s(x,{onClick:t[9]||(t[9]=c=>G(o.id,o.files[0].id)),icon:"fa-solid fa-download",class:"p-button-text p-button-info"},{default:b(()=>[W(" تحميل ")]),_:1}),y.value?z("",!0):(a(),A(x,{key:0,icon:"fa-solid fa-upload",class:"p-button-text p-button-info -2",onClick:t[10]||(t[10]=c=>g(0))},{default:b(()=>[W(" رفع ملف ")]),_:1}))])):(a(),n("div",Ut,[ee(s(x,{onClick:t[11]||(t[11]=c=>G(o.id,o.files[0].id)),icon:"fa-solid fa-download",class:"p-button-icon-only p-button-info",text:""},null,512),[[ie,{value:"تحميل",fitContent:!0},void 0,{top:!0}]]),y.value?z("",!0):ee((a(),A(x,{key:0,icon:"fa-solid fa-upload",class:"p-button-icon-only p-button-info",text:"",onClick:t[12]||(t[12]=c=>g(0))},null,512)),[[ie,{value:"رفع ملف",fitContent:!0},void 0,{top:!0}]])]))]),e("div",Pt,[e("div",Lt,[e("span",Bt,[p.value?(a(),A(j,{key:1,class:"p-inputtext p-component",modelValue:o.files[1].file,"onUpdate:modelValue":t[14]||(t[14]=c=>o.files[1].file=c),value:L.value[1],disabled:!0},null,8,["modelValue","value"])):(a(),A(j,{key:0,class:"p-inputtext p-component",modelValue:o.files[1].file,"onUpdate:modelValue":t[13]||(t[13]=c=>o.files[1].file=c),disabled:!0},null,8,["modelValue"])),zt])]),l.value>=768?(a(),n("div",qt,[s(x,{onClick:t[15]||(t[15]=c=>G(o.id,o.files[1].id)),icon:"fa-solid fa-download",class:"p-button-text p-button-info"},{default:b(()=>[W(" تحميل ")]),_:1}),y.value?z("",!0):(a(),A(x,{key:0,icon:"fa-solid fa-upload",class:"p-button-text p-button-info -2",onClick:t[16]||(t[16]=c=>g(1))},{default:b(()=>[W(" رفع ملف ")]),_:1}))])):(a(),n("div",Ot,[ee(s(x,{onClick:t[17]||(t[17]=c=>G(o.id,o.files[1].id)),icon:"fa-solid fa-download",class:"p-button-icon-only p-button-info",text:""},null,512),[[ie,{value:"تحميل",fitContent:!0},void 0,{top:!0}]]),y.value?z("",!0):ee((a(),A(x,{key:0,icon:"fa-solid fa-upload",class:"p-button-icon-only p-button-info",text:"",onClick:t[18]||(t[18]=c=>g(1))},null,512)),[[ie,{value:"رفع ملف",fitContent:!0},void 0,{top:!0}]])]))])],40,st)]),y.value?z("",!0):(a(),n("div",Yt,[s(x,{onClick:K,icon:"fa-solid fa-check",label:"تعديل"}),s(x,{onClick:t[19]||(t[19]=c=>y.value=!y.value),icon:"fa-solid fa-ban",label:"إلغاء التعديل",class:"p-button-danger",style:{"margin-right":"0.5em"}})])),s(ke,{position:"bottom-left"})]))]),_:1})])}}});const Et=be(jt,[["__scopeId","data-v-a6a5190d"]]),H=T=>(he("data-v-14779dd5"),T=T(),ge(),T),At=["onSubmit"],Gt={class:"grid p-fluid"},Wt={class:"field col-12 md:col-4 lg:col-4"},Kt={class:"p-float-label"},Ht=H(()=>e("label",{for:"firstName"},"الاسم ",-1)),Jt={style:{height:"2px","margin-bottom":"1rem"}},Qt={class:"field col-12 md:col-4 lg:col-4"},Xt={class:"p-float-label"},Zt=H(()=>e("label",{for:"lastName"},"اللقب ",-1)),el={style:{height:"2px","margin-bottom":"1rem"}},tl={class:"field col-12 md:col-4 lg:col-4"},ll={class:"p-float-label"},ol=H(()=>e("label",{for:"email"},"البريد الإلكتروني",-1)),sl={style:{height:"2px"}},al={class:"field col-12 md:col-4 lg:col-4"},il={class:"p-float-label"},nl=H(()=>e("label",{for:"inputtext"},"رقم هاتف ",-1)),dl={style:{height:"2px","margin-bottom":"1rem"}},rl={class:"field col-12 md:col-4 lg:col-4"},ul={class:"p-float-label"},cl=H(()=>e("label",{for:"identityType"},"نوع الاثبات ",-1)),pl={style:{height:"2px","margin-bottom":"1rem"}},ml={class:"field col-12 md:col-4 lg:col-4"},fl={class:"p-float-label"},vl=H(()=>e("label",{for:"inputtext"},"رقم الاثبات ",-1)),yl={style:{height:"2px","margin-bottom":"1rem"}},_l={class:"field col-12 md:col-4 lg:col-4"},hl={class:"p-float-label"},gl=H(()=>e("label",{for:"periodOption"},"مدة الصلاحية",-1)),bl={style:{display:"flex"}},$l={key:0,class:"field col-12 md:col-4 lg:col-4"},wl={class:"p-float-label"},xl=H(()=>e("label",{for:"fromDate"},"من ",-1)),Nl={key:1,class:"field col-12 md:col-4 lg:col-4"},kl={class:"p-float-label"},Vl=H(()=>e("label",{for:"fromDate"}," الى",-1)),Tl={class:"field col-12 md:col-4 lg:col-4"},Dl={class:"file-input-label",for:"fileInput1"},Cl={class:"file-input-content"},Ml={key:0,class:"file-input-icon"},Il={class:"file-input-text"},Sl=H(()=>e("i",{class:"pi pi-upload"},null,-1)),Rl={key:0,style:{color:"red","font-weight":"bold","font-size":"small"}},Fl={class:"field col-12 md:col-4 lg:col-4"},Ul={class:"file-input-label",for:"fileInput2"},Pl={class:"file-input-content"},Ll={key:0,class:"file-input-icon"},Bl={class:"file-input-text"},zl=H(()=>e("i",{class:"pi pi-upload"},null,-1)),ql={key:0,style:{color:"red","font-weight":"bold","font-size":"small"}},Ol=se({__name:"RepresentativeForm",props:{representatives:{type:Object,required:!0},submitButtonText:{type:String,required:!0},value:String},setup(T){const S=T,y=ae(),D=f(!1),r=f(null),C=f(null),u=f(S.representatives);async function p(L,v){const Y=L.target.files[0];Y&&(v===0?S.representatives.IdentityDocuments=Y:S.representatives.RepresentationDocument=Y)}const l=Ce(),o=async()=>{const L=await g.value.$validate();if(S.representatives.IdentityDocuments?r.value="":r.value="الحقل مطلوب",!S.representatives.RepresentationDocument)C.value="الحقل مطلوب";else{C.value="";try{L?(D.value=!0,l&&l.emit("form-submit",u.value)):y.add({severity:"error",summary:"رسالة خطأ",detail:"يرجى تعبئة الحقول",life:3e3})}catch(v){console.log(v)}}},h=Z(()=>({firstName:{required:$.withMessage("الحقل مطلوب",E),validateText:$.withMessage(", حروف عربيه او انجليزيه فقط",de),minLength:$.withMessage("يجب أن يحتوي على الأقل 3 أحرف",ne(3))},lastName:{required:$.withMessage("الحقل مطلوب",E),validateText:$.withMessage(", حروف عربيه او انجليزيه فقط",de),minLength:$.withMessage("يجب أن يحتوي على الأقل 3 أحرف",ne(3))},email:{required:$.withMessage("الحقل مطلوب",E),email:$.withMessage(" ليس عنوان بريد إلكتروني صالح",_e)},phoneNo:{required:$.withMessage("الحقل مطلوب",E),isLibyanPhoneNumber:$.withMessage(" , ليس رقم ليبي صالح",$e)},identityType:{required:$.withMessage("الحقل مطلوب",E)},identityNo:{required:$.withMessage("الحقل مطلوب",E)},type:{required:$.withMessage("الحقل مطلوب",E)}})),g=ve(h,u),N=[{value:1,text:"اثبات هويه"},{value:2,text:"جواز سفر"}];f([{value:1,label:"ملف شخصي"},{value:2,label:"تخويل الشركة"}]),f(null),f(null);const R=f([{label:"مره",value:"0"},{label:"من-الى",value:"1"},{label:"طوال فترة العقد",value:"2"}]);return(L,v)=>{var i,F,I,B;const Y=w("InputText"),K=w("InputMask"),J=w("Dropdown"),_=w("Calendar"),G=w("Button"),m=w("Toast");return a(),n("form",{onSubmit:ye(o,["prevent"])},[e("div",Gt,[e("div",Wt,[e("span",Kt,[s(Y,{id:"firstName",type:"text",modelValue:u.value.firstName,"onUpdate:modelValue":v[0]||(v[0]=d=>u.value.firstName=d)},null,8,["modelValue"]),Ht,e("div",Jt,[(a(!0),n(U,null,O(P(g).firstName.$errors,d=>(a(),n("span",{key:d.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},M(d.$message),1))),128))])])]),e("div",Qt,[e("span",Xt,[s(Y,{id:"lastName",type:"text",modelValue:u.value.lastName,"onUpdate:modelValue":v[1]||(v[1]=d=>u.value.lastName=d)},null,8,["modelValue"]),Zt,e("div",el,[(a(!0),n(U,null,O(P(g).lastName.$errors,d=>(a(),n("span",{key:d.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},M(d.$message),1))),128))])])]),e("div",tl,[e("span",ll,[s(Y,{id:"email",type:"text",modelValue:u.value.email,"onUpdate:modelValue":v[2]||(v[2]=d=>u.value.email=d)},null,8,["modelValue"]),ol,e("div",sl,[(a(!0),n(U,null,O(P(g).email.$errors,d=>(a(),n("span",{key:d.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},M(d.$message),1))),128))])])]),e("div",al,[e("span",il,[s(K,{modelValue:u.value.phoneNo,"onUpdate:modelValue":v[3]||(v[3]=d=>u.value.phoneNo=d),mask:"+218999999999",style:{direction:"ltr"}},null,8,["modelValue"]),nl,e("div",dl,[(a(!0),n(U,null,O(P(g).phoneNo.$errors,d=>(a(),n("span",{key:d.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},M(d.$message),1))),128))])])]),e("div",rl,[e("span",ul,[s(J,{modelValue:u.value.identityType,"onUpdate:modelValue":v[4]||(v[4]=d=>u.value.identityType=d),options:N,optionValue:"value",optionLabel:"text",placeholder:" نوع الاثبات"},null,8,["modelValue"]),cl,e("div",pl,[(a(!0),n(U,null,O(P(g).identityType.$errors,d=>(a(),n("span",{key:d.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},M(d.$message),1))),128))])])]),e("div",ml,[e("span",fl,[s(Y,{id:"inputtext",modelValue:u.value.identityNo,"onUpdate:modelValue":v[5]||(v[5]=d=>u.value.identityNo=d)},null,8,["modelValue"]),vl,e("div",yl,[(a(!0),n(U,null,O(P(g).identityNo.$errors,d=>(a(),n("span",{key:d.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},M(d.$message),1))),128))])])]),e("div",_l,[e("span",hl,[s(J,{modelValue:u.value.type,"onUpdate:modelValue":v[6]||(v[6]=d=>u.value.type=d),options:R.value,optionLabel:"label",placeholder:"Select Period Option"},null,8,["modelValue","options"]),gl])]),(a(!0),n(U,null,O(u.value.type,d=>(a(),n("span",bl,[d==="1"?(a(),n("div",$l,[e("span",wl,[s(_,{id:"fromDate",type:"date",modelValue:u.value.from,"onUpdate:modelValue":v[7]||(v[7]=k=>u.value.from=k)},null,8,["modelValue"]),xl])])):z("",!0),d=="1"?(a(),n("div",Nl,[e("span",kl,[s(_,{id:"fromDate",type:"date",modelValue:u.value.to,"onUpdate:modelValue":v[8]||(v[8]=k=>u.value.to=k)},null,8,["modelValue"]),Vl])])):z("",!0)]))),256)),e("div",Tl,[e("label",Dl,[e("div",Cl,[(i=u.value.IdentityDocuments)!=null&&i.name?z("",!0):(a(),n("div",Ml)),e("div",Il,[Sl,W(" "+M(((F=u.value.IdentityDocuments)==null?void 0:F.name)||" تعريف شخصي"),1)])]),e("input",{id:"fileInput1",style:{display:"none"},type:"file",onChange:v[9]||(v[9]=d=>p(d,0)),accept:"*"},null,32)]),r.value?(a(),n("div",Rl,M(r.value),1)):z("",!0)]),e("div",Fl,[e("label",Ul,[e("div",Pl,[(I=u.value.RepresentationDocument)!=null&&I.name?z("",!0):(a(),n("div",Ll)),e("div",Bl,[zl,W(" "+M(((B=u.value.RepresentationDocument)==null?void 0:B.name)||"تخويل  "),1)])]),e("input",{id:"fileInput2",style:{display:"none"},type:"file",onChange:v[10]||(v[10]=d=>p(d,1)),accept:"*"},null,32)]),C.value?(a(),n("div",ql,M(C.value),1)):z("",!0)])]),s(G,{style:{"margin-bottom":"50px"},onClick:o,icon:"pi pi-check",label:T.value,loading:D.value},null,8,["label","loading"]),s(m,{position:"bottom-left"})],40,At)}}});const Yl=be(Ol,[["__scopeId","data-v-14779dd5"]]),jl=["onSubmit"],El={class:"grid p-fluid"},Al={class:"field col-12 md:col-6 lg:col-4"},Gl={class:"p-float-label"},Wl=e("label",{for:"name"},"الاسم ",-1),Kl={style:{height:"2px"}},Hl={class:"field col-12 md:col-6 lg:col-4"},Jl={class:"p-float-label"},Ql=e("label",{for:"name"},"اللقب ",-1),Xl={style:{height:"2px"}},Zl={class:"field col-12 md:col-6 lg:col-4"},eo={class:"p-float-label"},to=e("label",{for:"email"},"البريد الإلكتروني",-1),lo={style:{height:"2px"}},oo={class:"field col-12 md:col-6 lg:col-4"},so={class:"p-float-label"},ao=e("label",{for:"inputtext"},"رقم هاتف ",-1),io={style:{height:"2px"}},no={class:"field col-12 md:col-6 lg:col-4"},ro={class:"p-float-label"},uo=e("label",{for:"identityType"},"نوع الاثبات ",-1),co={class:"field col-12 md:col-6 lg:col-4"},po={class:"p-float-label"},mo=e("label",{for:"inputtext"},"رقم الاثبات ",-1),fo={class:"field col-12 md:col-6 lg:col-4"},vo={class:"p-float-label"},yo=e("label",{for:"periodOption"},"مدة الصلاحية",-1),_o={key:0,class:"field col-12 md:col-6 lg:col-4"},ho={class:"p-float-label"},go=e("label",{for:"fromDate"},"من ",-1),bo={key:1,class:"field col-12 md:col-6 lg:col-4"},$o={class:"p-float-label"},wo=e("label",{for:"fromDate"}," الى",-1),xo={class:"field col-4 md:col-4 lg:col-4"},No={class:"p-float-label"},ko=e("label",{for:"secondaryPhone"},"تعريف شخصي",-1),Vo={class:"field col-5 md:col-5 lg:col-5"},To={class:"grid p-fluid"},Do={class:"field col-4 md:col-4 lg:col-4"},Co={class:"p-float-label"},Mo=e("label",{for:"secondaryPhone"},"تخويل من الشركة",-1),Io={class:"field col-4 md:col-3 lg:col-4"},So={class:"grid p-fluid"},Ro=se({__name:"EditRepresentatives",props:{id:{},representatives:{}},emits:["getRepresentatives"],setup(T,{emit:S}){const y=T,D=S,r=f(!1),C=pe(),u=f(!1);f(!1);const p=f();Z(()=>C&&C.params&&C.params.id?C.params.id:null),fe(()=>{o()});const l=ue({id:"",firstName:"",lastName:"",identityNo:"",email:"",phoneNo:"",identityType:"",type:null,activeFrom:"",activeTo:"",files:[{fileType:0,id:""},{fileType:0,id:""}]});async function o(){le.getById(y.id).then(m=>{var i;p.value=m.data.content,l.id=p.value.id,l.firstName=(i=p.value)==null?void 0:i.firstName,l.lastName=p.value.lastName,l.email=p.value.email,l.identityNo=p.value.identityNo,l.identityType=p.value.identityType,l.phoneNo=p.value.phoneNo,l.type=p.value.type,l.activeFrom=te(p.value.activeFrom).format("YYYY-MM-DD"),l.activeTo=p.value.activeTo,l.files[0].fileType=p.value.files[0].fileType,l.files[0].id=p.value.files[0].id,l.files[1].id=p.value.files[1].id,l.files[1].fileType=p.value.files[1].fileType})}const h=async(m,i)=>{try{console.log(m,i);const F=await le.getFile(m,i);if(F){const I=new Blob([F.data],{type:"application/octet-stream"}),B=URL.createObjectURL(I),d=document.createElement("a");d.href=B,d.download="downloaded_file.png",document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(B)}else console.error("Invalid file response")}catch(F){console.error("Error downloading file:",F),g.add({severity:"error",summary:"خطأ",detail:"حدث خطأ أثناء تحميل الملف",life:3e3})}},g=ae(),N=Z(()=>({firstName:{required:$.withMessage("الحقل مطلوب",E),validateText:$.withMessage(", حروف عربيه او انجليزيه فقط",de),minLength:$.withMessage("يجب أن يحتوي على الأقل 3 أحرف",ne(3))},lastName:{required:$.withMessage("الحقل مطلوب",E),validateText:$.withMessage(", حروف عربيه او انجليزيه فقط",de),minLength:$.withMessage("يجب أن يحتوي على الأقل 3 أحرف",ne(3))},email:{required:$.withMessage("الحقل مطلوب",E),email:$.withMessage(" ليس عنوان بريد إلكتروني صالح",_e)},phoneNo:{required:$.withMessage("الحقل مطلوب",E),isLibyanPhoneNumber:$.withMessage(" , ليس رقم ليبي صالح",$e)}})),R=ve(N,l),L=async()=>{await R.value.$validate(),new FormData;const m={email:l.email,phoneNo:l.phoneNo,identityNo:l.identityNo,identityType:l.identityType};le.edit(y.id,m).then(i=>{D("getRepresentatives"),g.add({severity:"success",summary:"Success Message",detail:i.data.msg,life:3e3}),v.value=!1}).catch(i=>{g.add({severity:"warn",summary:"خطا",detail:i,life:3e3})})},v=f(!1),Y=()=>{var m;v.value=!0,l.firstName=(m=p.value)==null?void 0:m.firstName,l.lastName=p.value.lastName,l.email=p.value.email,l.identityNo=p.value.identityNo,l.identityType=p.value.identityType,l.phoneNo=p.value.phoneNo,l.type=p.value.type,l.activeFrom=te(p.value.activeFrom).format("YYYY-MM-DD"),l.activeTo=te(p.value.activeTo).format("YYYY-MM-DD"),l.files[0].fileType=p.value.files[0].fileType,l.files[1].fileType=p.value.files[1].fileType},K=[{value:1,text:"اثبات هويه"},{value:2,text:"جواز سفر"}],J=f([{label:"مره",value:0},{label:"من-الى",value:1},{label:"طوال فترة العقد",value:2}]),_=Z(()=>l.files[0].fileType?l.files[0].id:"تعريف"),G=Z(()=>l.files[1].fileType?l.files[1].id:"تخويل");return(m,i)=>{const F=w("Button"),I=w("InputText"),B=w("InputMask"),d=w("Dropdown"),k=w("Calendar"),oe=w("Dialog"),V=ce("tooltip");return a(),n(U,null,[ee(s(F,{onClick:Y,icon:" fa-solid fa-pen",rounded:"",text:""},null,512),[[V,{value:"تعديل ",fitContent:!0}]]),s(oe,{header:"تعديل المخول",contentStyle:"max-height: 73vh; max-width: 70vw; min-width:50vw; padding: 20px;",visible:v.value,"onUpdate:visible":i[13]||(i[13]=t=>v.value=t),modal:!0},{default:b(()=>[e("form",{onSubmit:ye(L,["prevent"])},[e("div",El,[e("div",Al,[e("span",Gl,[s(I,{id:"name",type:"text",modelValue:l.firstName,"onUpdate:modelValue":i[0]||(i[0]=t=>l.firstName=t),disabled:!0},null,8,["modelValue"]),Wl,e("div",Kl,[(a(!0),n(U,null,O(P(R).firstName.$errors,t=>(a(),n("span",{key:t.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},M(t.$message),1))),128))])])]),e("div",Hl,[e("span",Jl,[s(I,{id:"name",type:"text",modelValue:l.lastName,"onUpdate:modelValue":i[1]||(i[1]=t=>l.lastName=t),disabled:!0},null,8,["modelValue"]),Ql,e("div",Xl,[(a(!0),n(U,null,O(P(R).lastName.$errors,t=>(a(),n("span",{key:t.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},M(t.$message),1))),128))])])]),e("div",Zl,[e("span",eo,[s(I,{id:"email",type:"text",modelValue:l.email,"onUpdate:modelValue":i[2]||(i[2]=t=>l.email=t)},null,8,["modelValue"]),to,e("div",lo,[(a(!0),n(U,null,O(P(R).email.$errors,t=>(a(),n("span",{key:t.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},M(t.$message),1))),128))])])]),e("div",oo,[e("span",so,[s(B,{modelValue:l.phoneNo,"onUpdate:modelValue":i[3]||(i[3]=t=>l.phoneNo=t),mask:"+218999999999",style:{direction:"ltr"}},null,8,["modelValue"]),ao,e("div",io,[(a(!0),n(U,null,O(P(R).phoneNo.$errors,t=>(a(),n("span",{key:t.$uid,style:{color:"red","font-weight":"bold","font-size":"small"}},M(t.$message),1))),128))])])]),e("div",no,[e("span",ro,[s(d,{modelValue:l.identityType,"onUpdate:modelValue":i[4]||(i[4]=t=>l.identityType=t),options:K,optionValue:"value",optionLabel:"text",placeholder:" نوع الاثبات"},null,8,["modelValue"]),uo])]),e("div",co,[e("span",po,[s(I,{id:"inputtext",modelValue:l.identityNo,"onUpdate:modelValue":i[5]||(i[5]=t=>l.identityNo=t)},null,8,["modelValue"]),mo])]),e("div",fo,[e("span",vo,[W(M()+" ",1),s(d,{modelValue:l.type,"onUpdate:modelValue":i[6]||(i[6]=t=>l.type=t),options:J.value,optionValue:"value",optionLabel:"label",placeholder:"Select Period Option",disabled:!0},null,8,["modelValue","options"]),yo])]),l.type=="1"?(a(),n("div",_o,[e("span",ho,[s(k,{id:"fromDate",type:"date",modelValue:l.activeFrom,"onUpdate:modelValue":i[7]||(i[7]=t=>l.activeFrom=t),disabled:!0},null,8,["modelValue"]),go])])):z("",!0),l.type=="1"?(a(),n("div",bo,[e("span",$o,[s(k,{id:"fromDate",type:"date",modelValue:l.activeTo,"onUpdate:modelValue":i[8]||(i[8]=t=>l.activeTo=t),disabled:!0},null,8,["modelValue"]),wo])])):z("",!0),e("div",xo,[e("span",No,[u.value?z("",!0):(a(),A(I,{key:0,class:"p-inputtext p-component",modelValue:l.files[0].fileType,"onUpdate:modelValue":i[9]||(i[9]=t=>l.files[0].fileType=t),value:_.value,disabled:!0},null,8,["modelValue","value"])),ko])]),e("div",Vo,[e("div",To,[s(F,{onClick:i[10]||(i[10]=t=>h(l.id,l.files[0].id)),icon:"fa-solid fa-download",class:"p-button-text p-button-info"},{default:b(()=>[W(" تحميل ")]),_:1})])]),e("div",Do,[e("span",Co,[s(I,{class:"p-inputtext p-component",modelValue:l.files[1].fileType,"onUpdate:modelValue":i[11]||(i[11]=t=>l.files[1].fileType=t),value:G.value,disabled:!0},null,8,["modelValue","value"]),Mo])]),e("div",Io,[e("div",So,[s(F,{onClick:i[12]||(i[12]=t=>h(l.id,l.files[1].id)),icon:"fa-solid fa-download",class:"p-button-text p-button-info"},{default:b(()=>[W(" تحميل ")]),_:1})])])]),s(F,{onClick:L,icon:"pi pi-check",loading:r.value,label:"تعديل"},null,8,["loading"])],40,jl)]),_:1},8,["visible"])],64)}}}),Fo=e("div",{class:"confirmation-content"},[e("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"red"}}),e("span",null,"هل تريد قبول هذا المخول ؟")],-1),Uo=se({__name:"requestDialog",props:{id:{},status:{}},emits:["getdata"],setup(T,{emit:S}){const y=f(!1);f(!1);const D=T,r=ue({value:D.status}),C=S,u=ae();function p(){le.approve(D.id).then(o=>{u.add({severity:"success",summary:"رسالة تأكيد",detail:o.data.msg,life:3e3}),r.value=1,C("getdata")}).catch(o=>{u.add({severity:"error",summary:"رسالة خطأ",detail:o.data.msg,life:3e3})})}function l(){le.reject(D.id).then(o=>{u.add({severity:"success",summary:"رسالة تأكيد",detail:o.data.msg,life:3e3}),r.value=1,C("getdata")}).catch(o=>{u.add({severity:"error",summary:"رسالة خطأ",detail:o.data.msg,life:3e3})})}return(o,h)=>{const g=w("Button"),N=w("Dialog"),R=ce("tooltip");return a(),n(U,null,[ee(s(g,{icon:"fa-solid fa-bell",severity:"info",text:"",rounded:"",onClick:h[0]||(h[0]=L=>y.value=!0)},null,512),[[R,{value:"طلب",fitContent:!0}]]),s(N,{visible:y.value,"onUpdate:visible":h[1]||(h[1]=L=>y.value=L),style:{width:"450px"},header:"تأكيد",modal:!0},{footer:b(()=>[s(g,{label:"قبول",icon:"pi pi-check",text:"",onClick:p}),s(g,{label:"رفض",icon:"pi pi-times",text:"",onClick:l})]),default:b(()=>[Fo]),_:1},8,["visible"])],64)}}}),Po={style:{display:"flex","align-items":"center"}},Lo={class:"p-paginator-pages",style:{display:"flex","justify-content":"center","align-items":"center","margin-top":"1rem"}},Bo=e("div",{class:"no-data-message",style:{height:"100px",display:"flex","flex-direction":"column","align-items":"center","justify-content":"center",padding:"20px","background-color":"#f9f9f9","border-radius":"5px","box-shadow":"0 2px 4px rgba(0, 0, 0, 0.1)"}},[e("p",{style:{"font-size":"18px","font-weight":"bold",color:"#888"}}," لا يوجد بيانات ")],-1),zo={key:0},qo=se({__name:"Representatives",props:{customerStatus:{},CustomerId:{},representatives:{}},emits:["getRepresentatives"],setup(T,{emit:S}){const y=pe(),D=T,r=Z(()=>y&&y.params&&y.params.id?y.params.id:null),C=f(),u=f(1),p=f(1);f(10);const l=f(0),o=f();f();const h=ze(),g=S,N=f({id:"",firstName:"",lastName:"",identityNo:"",email:"",phoneNo:"",identityType:null,customerId:Me(r.value),RepresentationDocument:null,IdentityDocuments:null,type:{value:"0",label:""},from:"",to:""}),R=ae(),L=async m=>{var I;const i=new FormData;i.append("CustomerId",D.CustomerId),i.append("firstName",m.firstName),i.append("lastName",m.lastName),i.append("identityNo",m.identityNo),i.append("email",m.email),i.append("phoneNo",m.phoneNo);const F=m.type&&typeof m.type=="object"?parseInt(m.type.value,10):NaN;isNaN(F)||i.append("type",F.toString()),m.type&&typeof m.type=="object"&&m.type.value==="1"&&(i.append("from",te(m.from).format("YYYY/MM/DD")),i.append("to",te(m.to).format("YYYY/MM/DD"))),i.append("identityType",((I=m.identityType)==null?void 0:I.toString())||""),i.append("IdentityDocument",m.IdentityDocuments),i.append("RepresentationDocument",m.RepresentationDocument),le.create(i).then(B=>{console.log(B),g("getRepresentatives"),R.add({severity:"success",summary:"رسالة نجاح",detail:B.data.msg,life:3e3})}).catch(B=>{var d;R.add({severity:"warn",summary:"رسالة تحذير",detail:((d=B.response.data)==null?void 0:d.msg)||"حدث خطأ ما",life:3e3}),console.log(B)}).finally(()=>{K.value=!1,Y()})},v=m=>{C.value=!0,le.remove(m).then(i=>{R.add({severity:"success",summary:"تم الحذف",detail:i.data.msg,life:3e3})}).catch(i=>{R.add({severity:"error",summary:"رسالة خطأ",detail:i.response.data.msg,life:3e3})}).finally(()=>{C.value=!1,g("getRepresentatives")})},Y=()=>{N.value.firstName="",N.value.lastName="",N.value.email="",N.value.phoneNo="",N.value.identityNo="",N.value.identityType=null,N.value.RepresentationDocument=null,N.value.IdentityDocuments=null},K=f(!1),J=()=>{K.value=!0},_=()=>{l<u&&(l.value+=1,p.value+=1,C.value=!0,g("getRepresentatives"))},G=()=>{l.value>1&&(l.value-=1,p.value-=1,C.value=!0,g("getRepresentatives"))};return(m,i)=>{const F=w("Button"),I=w("Column"),B=w("Tag"),d=w("DataTable");return a(),n(U,null,[e("div",Po,[s(F,{onClick:J,class:"p-button-primary mb-4",style:{display:"flex"}},{default:b(()=>[W(" اضافة مُخول ")]),_:1}),s(P(Ie),{header:"اضافة مُخول",contentStyle:"max-height: 70vh; max-width: 40vw; min-width:50vw; padding: 10px;",visible:K.value,"onUpdate:visible":i[0]||(i[0]=k=>K.value=k),modal:!0},{default:b(()=>[s(Yl,{onFormSubmit:L,representatives:N.value,submitButtonText:"add",value:"اضافه"},null,8,["representatives"])]),_:1},8,["visible"])]),s(d,{value:D.representatives,dataKey:"id",paginator:!0,rows:10,rowsPerPageOptions:[5,10,25],paginatorTemplate:"  "},{paginatorstart:b(()=>[e("span",Lo,[s(F,{style:{"margin-left":"1rem",height:"2rem",width:"2rem"},icon:"pi pi-angle-right",class:"p-button-rounded p-button-primary p-paginator-element",disabled:l.value===1,onClick:G},null,8,["disabled"]),W(" الصفحة "+M(l.value)+" من "+M(u.value)+" ",1),s(F,{style:{"margin-right":"1rem",height:"2rem",width:"2rem"},icon:"pi pi-angle-left",class:"p-button-rounded p-button-primary p-paginator-element",disabled:l.value===u.value,onClick:_},null,8,["disabled"])])]),empty:b(()=>[Bo]),default:b(()=>[s(I,{field:"firstName",header:"اسم الاول",style:{"min-width":"6rem"},class:"font-bold"}),s(I,{field:"email",header:"البريد الالكتروني",style:{"min-width":"6rem"},class:"font-bold"}),s(I,{field:"phoneNo",header:"رقم الهاتف",style:{"min-width":"6rem"},class:"font-bold"}),s(I,{field:"status",header:"  الحاله ",filterField:"status",style:{width:"6rem"},showFilterMenu:!1,filterMenuStyle:{width:"12rem"}},{body:b(({data:k})=>[s(B,{value:P(h).getSelectedStatusLabel(k.status),severity:P(h).getSeverity(k.status)},null,8,["value","severity"])]),_:1}),s(I,{style:{"min-width":"11rem"},header:"الاجراءات"},{body:b(k=>[k.data.status!==2?(a(),n("span",zo,[s(Le,{name:k.data.id,id:k.data.id,onSubmit:()=>v(k.data.id),type:"Representative"},null,8,["name","id","onSubmit"]),s(Ro,{id:k.data.id,representatives:o.value,onGetRepresentatives:i[1]||(i[1]=oe=>g("getRepresentatives"))},null,8,["id","representatives"])])):z("",!0),s(Be,{typeLock:"Representatives",id:k.data.id,name:k.data.id,status:k.data.status,onGetdata:i[2]||(i[2]=oe=>g("getRepresentatives"))},null,8,["id","name","status"]),k.data.status==3?(a(),A(Uo,{key:1,id:k.data.id,status:k.data.status,onGetdata:i[3]||(i[3]=oe=>g("getRepresentatives"))},null,8,["id","status"])):z("",!0)]),_:1})]),_:1},8,["value"])],64)}}});const Oo=e("div",{class:"no-data-message",style:{height:"100px",display:"flex","flex-direction":"column","align-items":"center","justify-content":"center",padding:"20px","background-color":"#f9f9f9","border-radius":"5px","box-shadow":"0 2px 4px rgba(0, 0, 0, 0.1)"}},[e("p",{style:{"font-size":"18px","font-weight":"bold",color:"#888"}}," لا يوجد بيانات ")],-1),Yo=se({__name:"SubscriptionByCustomerId",props:{subsId:{}},setup(T){f([]);const S=T;pe(),console.log(S.subsId);const y=f({global:{value:null,matchMode:Se.CONTAINS}}),D=f([{field:"serviceName",header:"الباقه"}]),r=f(D.value),C=h=>te(h).format("yy/M/D  hh:mm a"),u=h=>{switch(l(h)){case" مفعل":return"success";case" غير مفعل":return"danger";case" مقفل":return"danger"}},p=h=>{if(h===1)return" مفعل";if(h===2)return" غير مفعل";if(h===5)return" مقفل"},l=h=>{if(h=="1")return" مفعل";if(h=="2")return" غير مفعل";if(h=="5")return" مقفل"},o=h=>{const g=te(),R=te(h).diff(g,"days");return R<=0?{label:"منتهي",color:"red"}:R<=30?{label:"قريباً من الانتهاء",color:"orange"}:{label:"صالح",color:"green"}};return(h,g)=>{const N=w("Column"),R=w("Tag"),L=w("Dropdown"),v=w("Button"),Y=w("RouterLink"),K=w("DataTable"),J=ce("tooltip");return S.subsId?(a(),A(K,{key:0,ref:"dt",value:S.subsId,dataKey:"id",paginator:!0,rows:5,filters:y.value,"onUpdate:filters":g[0]||(g[0]=_=>y.value=_),globalFilterFields:["serviceName","customerName"],paginatorTemplate:"",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"عرض {first} الى {last} من {totalRecords} عميل",responsiveLayout:"scroll"},{empty:b(()=>[Oo]),default:b(()=>[s(N,{field:"customerName",header:"اسم العميل",style:{"min-width":"6rem"},class:"font-bold"}),s(N,{field:"daysRemaining",header:"الصلاحية",style:{"min-width":"4rem"}},{body:b(({data:_})=>[e("span",{style:Re({color:o(_.endDate).color})},M(o(_.endDate).label),5)]),_:1}),s(N,{field:"status",header:"  الحاله ",filterField:"status",style:{width:"6rem"},showFilterMenu:!1,filterMenuStyle:{width:"12rem"}},{body:b(({data:_})=>[s(R,{value:p(_.status),severity:u(_.status)},null,8,["value","severity"])]),filter:b(({filterModel:_,filterCallback:G})=>[s(L,{modelValue:_.value,"onUpdate:modelValue":m=>_.value=m,onChange:m=>G(),options:["warning",""],placeholder:"Select One",class:"p-column-filter",style:{"min-width":"12rem"},showClear:!0},{option:b(m=>[s(R,{value:m.option,severity:m.option},null,8,["value","severity"])]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),(a(!0),n(U,null,O(r.value,(_,G)=>(a(),A(N,{field:_.field,header:_.header,key:_.field+"_"+G,style:{"min-width":"4rem"}},null,8,["field","header"]))),128)),s(N,{field:"startDate",header:"تاريخ البداية ",dataType:"date",style:{"min-width":"10rem"}},{body:b(({data:_})=>[W(M(C(_.startDate)),1)]),_:1}),s(N,{field:"endDate",header:"تاريخ النهاية ",dataType:"date",style:{"min-width":"10rem"}},{body:b(({data:_})=>[W(M(C(_.endDate)),1)]),_:1}),s(N,{style:{"min-width":"3rem"}},{body:b(_=>[(a(),A(Y,{key:_.data.id,to:"/subscriptionsRecord/SubscriptionsDetaView/"+_.data.id,style:{"text-decoration":"none"}},{default:b(()=>[ee(s(v,{icon:"fa-solid fa-circle-info",severity:"info",text:"",rounded:""},null,512),[[J,{value:"التفاصيل",fitContent:!0}]])]),_:2},1032,["to"]))]),_:1})]),_:1},8,["value","filters"])):z("",!0)}}}),me=T=>(he("data-v-072246eb"),T=T(),ge(),T),jo=me(()=>e("i",{class:"ml-2 pi pi-user"},null,-1)),Eo=me(()=>e("span",null,"المخولين",-1)),Ao=me(()=>e("i",{class:"ml-2 pi pi-cog"},null,-1)),Go=me(()=>e("span",null,"جدول الاشتراكات",-1)),Wo=se({__name:"CustomerProfile",setup(T){const S=pe();Ne();const y=f(!1);f(!1);const D=Z(()=>S&&S.params&&S.params.id?String(S.params.id):""),r=ue({id:"",address:"",city:"",status:0,name:"",email:"",primaryPhone:"",secondaryPhone:"",files:[{file:null,docType:0},{file:null,docType:0}],subsicrptions:"",createdOn:"",representative:[],subscriptions:[]});fe(async()=>{await C()});function C(){y.value=!0,re.getById(D.value).then(l=>{const o=l.data.content;r.id=o.id,r.address=o.address,r.city=o.city,r.createdOn=o.createdOn,r.status=o.status,r.email=o.email,r.files=o.files,r.name=o.name,r.primaryPhone=o.primaryPhone,r.secondaryPhone=o.secondaryPhone,u(),p()}).catch(function(l){console.log(l)}).finally(()=>{y.value=!1})}function u(){le.get(D.value).then(l=>{r.representative=l.data.content})}function p(){Fe.get(1,20,D.value).then(l=>{r.subsicrptions=l.data.content})}return ae(),(l,o)=>{const h=w("card");return a(),n(U,null,[(a(),A(Et,{customer:r,key:r.id,onGetCustomers:C},null,8,["customer"])),s(h,{class:"shadow-2 p-3 mt-3 border-round-2xl"},{content:b(()=>[s(P(Ue),{class:"tabview-custom",ref:"tabview4"},{default:b(()=>[s(P(xe),null,{header:b(()=>[jo,Eo]),default:b(()=>[s(qo,{onGetRepresentatives:o[0]||(o[0]=g=>u()),customerStatus:r.status,CustomerId:r.id,representatives:r.representative},null,8,["customerStatus","CustomerId","representatives"])]),_:1}),s(P(xe),null,{header:b(()=>[Ao,Go]),default:b(()=>[(a(),A(Yo,{key:r.subsicrptions,subsId:r.subsicrptions},null,8,["subsId"]))]),_:1})]),_:1},512)]),_:1})],64)}}});const os=be(Wo,[["__scopeId","data-v-072246eb"]]);export{os as default};
